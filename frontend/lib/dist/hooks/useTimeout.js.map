{"version":3,"file":"useTimeout.js","names":["useCallback","useEffect","useRef","useTimeout","callback","timeoutMs","timeoutRef","callbackRef","current","setTimeout","clearTimeout","clear"],"sources":["../../src/hooks/useTimeout.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useEffect, useRef } from \"react\"\n\n/**\n * Call setTimeout with the passed callback and timeout in milliseconds.\n * The timeout can be cleared by calling the returned clear-function.\n *\n * A new timeout will be set when the passed timeoutMs changes.\n *\n * @param callback to be called when the timeout delay is over\n * @param timeoutMs the delay in milliseconds after which the timeout callback is called\n * @returns a memoized clear (stable reference across re-runs) function to stop the timeout\n */\nfunction useTimeout(callback: () => void, timeoutMs: number): () => void {\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null)\n  const callbackRef = useRef<() => void>(callback)\n\n  useEffect(() => {\n    callbackRef.current = callback\n  }, [callback])\n\n  useEffect(() => {\n    timeoutRef.current = setTimeout(callbackRef.current, timeoutMs)\n\n    return () => {\n      if (!timeoutRef.current) {\n        return\n      }\n      clearTimeout(timeoutRef.current)\n      timeoutRef.current = null\n    }\n  }, [timeoutMs])\n\n  const clear = useCallback(() => {\n    if (!timeoutRef.current) {\n      return\n    }\n    clearTimeout(timeoutRef.current)\n  }, [])\n\n  return clear\n}\n\nexport default useTimeout\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,WAAW,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASC,UAAUA,CAACC,QAAoB,EAAEC,SAAiB,EAAc;EACvE,MAAMC,UAAU,GAAGJ,MAAM,CAAuC,IAAI,CAAC;EACrE,MAAMK,WAAW,GAAGL,MAAM,CAAaE,QAAQ,CAAC;EAEhDH,SAAS,CAAC,MAAM;IACdM,WAAW,CAACC,OAAO,GAAGJ,QAAQ;EAChC,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAEdH,SAAS,CAAC,MAAM;IACdK,UAAU,CAACE,OAAO,GAAGC,UAAU,CAACF,WAAW,CAACC,OAAO,EAAEH,SAAS,CAAC;IAE/D,OAAO,MAAM;MACX,IAAI,CAACC,UAAU,CAACE,OAAO,EAAE;QACvB;MACF;MACAE,YAAY,CAACJ,UAAU,CAACE,OAAO,CAAC;MAChCF,UAAU,CAACE,OAAO,GAAG,IAAI;IAC3B,CAAC;EACH,CAAC,EAAE,CAACH,SAAS,CAAC,CAAC;EAEf,MAAMM,KAAK,GAAGX,WAAW,CAAC,MAAM;IAC9B,IAAI,CAACM,UAAU,CAACE,OAAO,EAAE;MACvB;IACF;IACAE,YAAY,CAACJ,UAAU,CAACE,OAAO,CAAC;EAClC,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOG,KAAK;AACd;AAEA,eAAeR,UAAU"}