{"version":3,"file":"test_util.js","names":["React","render","reactTestingLibraryRender","ThemeProvider","baseTheme","mockTheme","LibContext","jsx","_jsx","ui","options","wrapper","_ref","children","theme","emotion","legacyRoot","mockWindowLocation","hostname","window","location","assign","jest","fn","customRenderLibContext","component","overrideLibContextProps","defaultLibContextProps","isFullScreen","setFullScreen","addScriptFinishedHandler","removeScriptFinishedHandler","activeTheme","setTheme","availableThemes","addThemes","onPageChange","currentPageScriptHash","libConfig","fragmentIdsThisRun","_ref2","Provider","value"],"sources":["../src/test_util.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable import/no-extraneous-dependencies */\nimport React, { ReactElement } from \"react\"\n\nimport {\n  render as reactTestingLibraryRender,\n  RenderOptions,\n  RenderResult,\n} from \"@testing-library/react\"\n\n/* eslint-enable */\nimport ThemeProvider from \"./components/core/ThemeProvider\"\nimport { baseTheme } from \"./theme\"\nimport { mockTheme } from \"./mocks/mockTheme\"\nimport { LibContext, LibContextProps } from \"./components/core/LibContext\"\n\n/**\n * Use react-testing-library to render a ReactElement. The element will be\n * wrapped in our ThemeProvider.\n */\nexport function render(\n  ui: ReactElement,\n  options?: Omit<RenderOptions, \"queries\">\n): RenderResult {\n  return reactTestingLibraryRender(ui, {\n    wrapper: ({ children }) => (\n      <ThemeProvider theme={mockTheme.emotion}>{children}</ThemeProvider>\n    ),\n    ...options,\n    // TODO: Remove this to have RTL run on React 18\n    // react-18-upgrade\n    legacyRoot: true,\n  })\n}\n\nexport function mockWindowLocation(hostname: string): void {\n  // Mock window.location by creating a new object\n  // Source: https://www.benmvp.com/blog/mocking-window-location-methods-jest-jsdom/\n  // @ts-expect-error\n  delete window.location\n\n  // @ts-expect-error\n  window.location = {\n    assign: jest.fn(),\n    hostname: hostname,\n  }\n}\n\n/**\n * Use react-testing-library to render a ReactElement. The element will be\n * wrapped in our LibContext.Provider.\n */\nexport const customRenderLibContext = (\n  component: ReactElement,\n  overrideLibContextProps: Partial<LibContextProps>\n): RenderResult => {\n  const defaultLibContextProps = {\n    isFullScreen: false,\n    setFullScreen: jest.fn(),\n    addScriptFinishedHandler: jest.fn(),\n    removeScriptFinishedHandler: jest.fn(),\n    activeTheme: baseTheme,\n    setTheme: jest.fn(),\n    availableThemes: [],\n    addThemes: jest.fn(),\n    onPageChange: jest.fn(),\n    currentPageScriptHash: \"\",\n    libConfig: {},\n    fragmentIdsThisRun: [],\n  }\n\n  return reactTestingLibraryRender(component, {\n    wrapper: ({ children }) => (\n      <ThemeProvider theme={baseTheme.emotion}>\n        <LibContext.Provider\n          value={{ ...defaultLibContextProps, ...overrideLibContextProps }}\n        >\n          {children}\n        </LibContext.Provider>\n      </ThemeProvider>\n    ),\n  })\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAOA,KAAK,MAAwB,OAAO;AAE3C,SACEC,MAAM,IAAIC,yBAAyB,QAG9B,wBAAwB;;AAE/B;AACA,OAAOC,aAAa;AACpB,SAASC,SAAS;AAClB,SAASC,SAAS;AAClB,SAASC,UAAU;;AAEnB;AACA;AACA;AACA;AAHA,SAAAC,GAAA,IAAAC,IAAA;AAIA,OAAO,SAASP,MAAMA,CACpBQ,EAAgB,EAChBC,OAAwC,EAC1B;EACd,OAAOR,yBAAyB,CAACO,EAAE,EAAE;IACnCE,OAAO,EAAEC,IAAA;MAAA,IAAC;QAAEC;MAAS,CAAC,GAAAD,IAAA;MAAA,oBACpBJ,IAAA,CAACL,aAAa;QAACW,KAAK,EAAET,SAAS,CAACU,OAAQ;QAAAF,QAAA,EAAEA;MAAQ,CAAgB,CAAC;IAAA,CACpE;IACD,GAAGH,OAAO;IACV;IACA;IACAM,UAAU,EAAE;EACd,CAAC,CAAC;AACJ;AAEA,OAAO,SAASC,kBAAkBA,CAACC,QAAgB,EAAQ;EACzD;EACA;EACA;EACA,OAAOC,MAAM,CAACC,QAAQ;;EAEtB;EACAD,MAAM,CAACC,QAAQ,GAAG;IAChBC,MAAM,EAAEC,IAAI,CAACC,EAAE,CAAC,CAAC;IACjBL,QAAQ,EAAEA;EACZ,CAAC;AACH;;AAEA;AACA;AACA;AACA;AACA,OAAO,MAAMM,sBAAsB,GAAGA,CACpCC,SAAuB,EACvBC,uBAAiD,KAChC;EACjB,MAAMC,sBAAsB,GAAG;IAC7BC,YAAY,EAAE,KAAK;IACnBC,aAAa,EAAEP,IAAI,CAACC,EAAE,CAAC,CAAC;IACxBO,wBAAwB,EAAER,IAAI,CAACC,EAAE,CAAC,CAAC;IACnCQ,2BAA2B,EAAET,IAAI,CAACC,EAAE,CAAC,CAAC;IACtCS,WAAW,EAAE5B,SAAS;IACtB6B,QAAQ,EAAEX,IAAI,CAACC,EAAE,CAAC,CAAC;IACnBW,eAAe,EAAE,EAAE;IACnBC,SAAS,EAAEb,IAAI,CAACC,EAAE,CAAC,CAAC;IACpBa,YAAY,EAAEd,IAAI,CAACC,EAAE,CAAC,CAAC;IACvBc,qBAAqB,EAAE,EAAE;IACzBC,SAAS,EAAE,CAAC,CAAC;IACbC,kBAAkB,EAAE;EACtB,CAAC;EAED,OAAOrC,yBAAyB,CAACuB,SAAS,EAAE;IAC1Cd,OAAO,EAAE6B,KAAA;MAAA,IAAC;QAAE3B;MAAS,CAAC,GAAA2B,KAAA;MAAA,oBACpBhC,IAAA,CAACL,aAAa;QAACW,KAAK,EAAEV,SAAS,CAACW,OAAQ;QAAAF,QAAA,eACtCL,IAAA,CAACF,UAAU,CAACmC,QAAQ;UAClBC,KAAK,EAAE;YAAE,GAAGf,sBAAsB;YAAE,GAAGD;UAAwB,CAAE;UAAAb,QAAA,EAEhEA;QAAQ,CACU;MAAC,CACT,CAAC;IAAA;EAEpB,CAAC,CAAC;AACJ,CAAC"}