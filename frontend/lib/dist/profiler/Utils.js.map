{"version":3,"file":"Utils.js","names":["findNextEventIndex","events","startEvent","pred","startIndex","indexOf","ii","length","undefined","findNextEvent","index","findPrevEventIndex","event","findPrevEvent","isHandleMessageEvent","messageIndex","getTimeDelta","a","b","Math","abs","timestamp"],"sources":["../../src/profiler/Utils.ts"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  HandleMessageEvent,\n  PerformanceEvent,\n} from \"@streamlit/lib/src/profiler/PerformanceEvents\"\n\nexport type EventPredicate = (event: PerformanceEvent) => boolean\n\nexport function findNextEventIndex(\n  events: PerformanceEvent[],\n  startEvent: PerformanceEvent | number,\n  pred: EventPredicate\n): number | undefined {\n  const startIndex =\n    typeof startEvent === \"number\" ? startEvent : events.indexOf(startEvent)\n\n  for (let ii = startIndex; ii < events.length; ++ii) {\n    if (pred(events[ii])) {\n      return ii\n    }\n  }\n\n  return undefined\n}\n\nexport function findNextEvent(\n  events: PerformanceEvent[],\n  startEvent: PerformanceEvent | number,\n  pred: EventPredicate\n): PerformanceEvent | undefined {\n  const index = findNextEventIndex(events, startEvent, pred)\n  return index !== undefined ? events[index] : undefined\n}\n\nexport function findPrevEventIndex(\n  events: PerformanceEvent[],\n  startEvent: PerformanceEvent | number,\n  pred: EventPredicate\n): number | undefined {\n  const startIndex =\n    typeof startEvent === \"number\" ? startEvent : events.indexOf(startEvent)\n\n  for (let ii = startIndex; ii >= 0; --ii) {\n    const event = events[ii]\n    if (pred(event)) {\n      return ii\n    }\n  }\n\n  return undefined\n}\n\nexport function findPrevEvent(\n  events: PerformanceEvent[],\n  startEvent: PerformanceEvent | number,\n  pred: EventPredicate\n): PerformanceEvent | undefined {\n  const index = findPrevEventIndex(events, startEvent, pred)\n  return index !== undefined ? events[index] : undefined\n}\n\nexport function isHandleMessageEvent(\n  event: PerformanceEvent\n): event is HandleMessageEvent {\n  return (event as HandleMessageEvent).messageIndex !== undefined\n}\n\n/** Return the elapsed time between two performance events. */\nexport function getTimeDelta(\n  a: PerformanceEvent,\n  b: PerformanceEvent\n): number {\n  return Math.abs((b.timestamp as number) - (a.timestamp as number))\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AASA,OAAO,SAASA,kBAAkBA,CAChCC,MAA0B,EAC1BC,UAAqC,EACrCC,IAAoB,EACA;EACpB,MAAMC,UAAU,GACd,OAAOF,UAAU,KAAK,QAAQ,GAAGA,UAAU,GAAGD,MAAM,CAACI,OAAO,CAACH,UAAU,CAAC;EAE1E,KAAK,IAAII,EAAE,GAAGF,UAAU,EAAEE,EAAE,GAAGL,MAAM,CAACM,MAAM,EAAE,EAAED,EAAE,EAAE;IAClD,IAAIH,IAAI,CAACF,MAAM,CAACK,EAAE,CAAC,CAAC,EAAE;MACpB,OAAOA,EAAE;IACX;EACF;EAEA,OAAOE,SAAS;AAClB;AAEA,OAAO,SAASC,aAAaA,CAC3BR,MAA0B,EAC1BC,UAAqC,EACrCC,IAAoB,EACU;EAC9B,MAAMO,KAAK,GAAGV,kBAAkB,CAACC,MAAM,EAAEC,UAAU,EAAEC,IAAI,CAAC;EAC1D,OAAOO,KAAK,KAAKF,SAAS,GAAGP,MAAM,CAACS,KAAK,CAAC,GAAGF,SAAS;AACxD;AAEA,OAAO,SAASG,kBAAkBA,CAChCV,MAA0B,EAC1BC,UAAqC,EACrCC,IAAoB,EACA;EACpB,MAAMC,UAAU,GACd,OAAOF,UAAU,KAAK,QAAQ,GAAGA,UAAU,GAAGD,MAAM,CAACI,OAAO,CAACH,UAAU,CAAC;EAE1E,KAAK,IAAII,EAAE,GAAGF,UAAU,EAAEE,EAAE,IAAI,CAAC,EAAE,EAAEA,EAAE,EAAE;IACvC,MAAMM,KAAK,GAAGX,MAAM,CAACK,EAAE,CAAC;IACxB,IAAIH,IAAI,CAACS,KAAK,CAAC,EAAE;MACf,OAAON,EAAE;IACX;EACF;EAEA,OAAOE,SAAS;AAClB;AAEA,OAAO,SAASK,aAAaA,CAC3BZ,MAA0B,EAC1BC,UAAqC,EACrCC,IAAoB,EACU;EAC9B,MAAMO,KAAK,GAAGC,kBAAkB,CAACV,MAAM,EAAEC,UAAU,EAAEC,IAAI,CAAC;EAC1D,OAAOO,KAAK,KAAKF,SAAS,GAAGP,MAAM,CAACS,KAAK,CAAC,GAAGF,SAAS;AACxD;AAEA,OAAO,SAASM,oBAAoBA,CAClCF,KAAuB,EACM;EAC7B,OAAQA,KAAK,CAAwBG,YAAY,KAAKP,SAAS;AACjE;;AAEA;AACA,OAAO,SAASQ,YAAYA,CAC1BC,CAAmB,EACnBC,CAAmB,EACX;EACR,OAAOC,IAAI,CAACC,GAAG,CAAEF,CAAC,CAACG,SAAS,GAAeJ,CAAC,CAACI,SAAoB,CAAC;AACpE"}