{"version":3,"file":"BaseColorPicker.test.js","names":["React","fireEvent","screen","render","LabelVisibilityOptions","BaseColorPicker","jsx","_jsx","getProps","props","arguments","length","undefined","label","value","width","disabled","onChange","jest","fn","describe","it","colorPicker","getByTestId","expect","toBeInTheDocument","toHaveClass","widgetLabel","queryByText","labelVisibility","Hidden","toHaveStyle","Collapsed","colorBlock","click","colorInput","getByRole","toHaveValue","change","target","newColor","showValue","colorLabel","getByText","not","help","tooltipIcon"],"sources":["../../../../src/components/shared/BaseColorPicker/BaseColorPicker.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport \"@testing-library/jest-dom\"\nimport { fireEvent, screen } from \"@testing-library/react\"\n\nimport { render } from \"@streamlit/lib/src/test_util\"\nimport { LabelVisibilityOptions } from \"@streamlit/lib/src/util/utils\"\n\nimport BaseColorPicker, { BaseColorPickerProps } from \"./BaseColorPicker\"\n\nconst getProps = (\n  props: Partial<BaseColorPickerProps> = {}\n): BaseColorPickerProps => ({\n  label: \"Label\",\n  value: \"#000000\",\n  width: 0,\n  disabled: false,\n  onChange: jest.fn(),\n  ...props,\n})\n\ndescribe(\"ColorPicker widget\", () => {\n  it(\"renders without crashing\", () => {\n    const props = getProps()\n    render(<BaseColorPicker {...props} />)\n    const colorPicker = screen.getByTestId(\"stColorPicker\")\n    expect(colorPicker).toBeInTheDocument()\n    expect(colorPicker).toHaveClass(\"stColorPicker\")\n  })\n\n  it(\"should render a label in the title\", () => {\n    const props = getProps()\n    render(<BaseColorPicker {...props} />)\n    const widgetLabel = screen.queryByText(`${props.label}`)\n    expect(widgetLabel).toBeInTheDocument()\n  })\n\n  it(\"pass labelVisibility prop to StyledWidgetLabel correctly when hidden\", () => {\n    const props = getProps({\n      labelVisibility: LabelVisibilityOptions.Hidden,\n    })\n    render(<BaseColorPicker {...props} />)\n\n    expect(screen.getByTestId(\"stWidgetLabel\")).toHaveStyle(\n      \"visibility: hidden\"\n    )\n  })\n\n  it(\"pass labelVisibility prop to StyledWidgetLabel correctly when collapsed\", () => {\n    const props = getProps({\n      labelVisibility: LabelVisibilityOptions.Collapsed,\n    })\n    render(<BaseColorPicker {...props} />)\n\n    expect(screen.getByTestId(\"stWidgetLabel\")).toHaveStyle(\"display: none\")\n  })\n\n  it(\"should have correct style\", () => {\n    const props = getProps()\n    render(<BaseColorPicker {...props} />)\n    const colorPicker = screen.getByTestId(\"stColorPicker\")\n\n    expect(colorPicker).toHaveStyle(`width: ${props.width}px`)\n  })\n\n  it(\"should render a default color in the preview and the color picker\", () => {\n    const props = getProps()\n    render(<BaseColorPicker {...props} />)\n\n    const colorBlock = screen.getByTestId(\"stColorPickerBlock\")\n    fireEvent.click(colorBlock)\n\n    expect(colorBlock).toHaveStyle(\"background-color: #000000\")\n\n    const colorInput = screen.getByRole(\"textbox\")\n    expect(colorInput).toHaveValue(\"#000000\")\n  })\n\n  it(\"supports hex shorthand\", () => {\n    const props = getProps()\n    render(<BaseColorPicker {...props} />)\n\n    const colorBlock = screen.getByTestId(\"stColorPickerBlock\")\n    fireEvent.click(colorBlock)\n\n    const colorInput = screen.getByRole(\"textbox\")\n    fireEvent.change(colorInput, { target: { value: \"#333\" } })\n\n    expect(colorInput).toHaveValue(\"#333333\")\n    expect(colorBlock).toHaveStyle(\"background-color: #333333\")\n  })\n\n  it(\"should update the widget value when it's changed\", () => {\n    const props = getProps()\n    render(<BaseColorPicker {...props} />)\n\n    const newColor = \"#E91E63\"\n    const colorBlock = screen.getByTestId(\"stColorPickerBlock\")\n    fireEvent.click(colorBlock)\n\n    const colorInput = screen.getByRole(\"textbox\")\n    fireEvent.change(colorInput, { target: { value: newColor } })\n\n    expect(colorInput).toHaveValue(newColor)\n    expect(colorBlock).toHaveStyle(`background-color: ${newColor}`)\n  })\n\n  describe(\"ColorPicker widget with optional params\", () => {\n    it(\"renders with showValue\", () => {\n      const props = getProps({ showValue: true })\n      render(<BaseColorPicker {...props} />)\n      const colorLabel = screen.getByText(\"#000000\")\n      expect(colorLabel).toBeInTheDocument()\n    })\n\n    it(\"renders without showValue\", () => {\n      const props = getProps()\n      render(<BaseColorPicker {...props} />)\n      const colorLabel = screen.queryByText(\"#000000\")\n      expect(colorLabel).not.toBeInTheDocument()\n    })\n\n    it(\"should render TooltipIcon if help text provided\", () => {\n      const props = getProps({ help: \"help text\" })\n      render(<BaseColorPicker {...props} />)\n      const tooltipIcon = screen.getByTestId(\"stTooltipIcon\")\n      expect(tooltipIcon).toBeInTheDocument()\n    })\n  })\n})\n"],"mappings":"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"}