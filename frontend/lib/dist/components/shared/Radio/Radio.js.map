{"version":3,"file":"Radio.js","names":["React","memo","useCallback","useEffect","useState","useTheme","ALIGN","RadioGroup","Radio","UIRadio","StyledWidgetLabelHelpInline","WidgetLabel","TooltipIcon","Placement","StreamlitMarkdown","jsx","_jsx","jsxs","_jsxs","_ref","disabled","horizontal","width","value","defaultValue","onChange","options","captions","label","labelVisibility","help","setValue","onChangeCallback","e","selectedIndex","parseInt","target","theme","colors","radii","style","hasCaptions","length","hasOptions","cleanedOptions","shouldDisable","spacerNeeded","caption","spacer","className","children","content","placement","TOP_RIGHT","toString","undefined","align","vertical","overrides","RadioGroupRoot","gap","spacing","sm","none","minHeight","sizes","minElementHeight","map","option","index","Root","_ref2","$isFocusVisible","marginBottom","marginTop","marginRight","lg","paddingLeft","alignItems","paddingRight","threeXS","backgroundColor","darkenedBgMix25","borderTopLeftRadius","md","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","RadioMarkOuter","_ref3","$checked","checkbox","height","marginLeft","primary","fadedText40","RadioMarkInner","_ref4","Label","color","bodyText","position","top","px","source","allowHTML","isLabel","largerLabel","isCaption"],"sources":["../../../../src/components/shared/Radio/Radio.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  memo,\n  ReactElement,\n  useCallback,\n  useEffect,\n  useState,\n} from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport { ALIGN, RadioGroup, Radio as UIRadio } from \"baseui/radio\"\n\nimport {\n  StyledWidgetLabelHelpInline,\n  WidgetLabel,\n} from \"@streamlit/lib/src/components/widgets/BaseWidget\"\nimport TooltipIcon from \"@streamlit/lib/src/components/shared/TooltipIcon\"\nimport { LabelVisibilityOptions } from \"@streamlit/lib/src/util/utils\"\nimport { Placement } from \"@streamlit/lib/src/components/shared/Tooltip\"\nimport StreamlitMarkdown from \"@streamlit/lib/src/components/shared/StreamlitMarkdown/StreamlitMarkdown\"\n\nexport interface Props {\n  disabled: boolean\n  horizontal: boolean\n  width?: number\n  value: number | null\n  onChange: (selectedIndex: number) => any\n  options: any[]\n  captions: any[]\n  label?: string\n  labelVisibility?: LabelVisibilityOptions\n  help?: string\n}\n\nfunction Radio({\n  disabled,\n  horizontal,\n  width,\n  value: defaultValue,\n  onChange,\n  options,\n  captions,\n  label,\n  labelVisibility,\n  help,\n}: Readonly<Props>): ReactElement {\n  const [value, setValue] = useState(defaultValue ?? null)\n\n  useEffect(() => {\n    if (defaultValue === value) {\n      return\n    }\n\n    setValue(defaultValue ?? null)\n\n    // Exclude value from the dependency list on purpose to avoid a loop.\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, [defaultValue])\n\n  const onChangeCallback = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>): void => {\n      const selectedIndex = parseInt(e.target.value, 10)\n      setValue(selectedIndex)\n      onChange(selectedIndex) // Needs to happen later, no?\n    },\n    [onChange]\n  )\n\n  const theme = useTheme()\n  const { colors, radii } = theme\n  const style = { width }\n  const hasCaptions = captions.length > 0\n  const hasOptions = options.length > 0\n  const cleanedOptions = hasOptions ? options : [\"No options to select.\"]\n\n  // Either the user specified it as disabled or it's disabled because we don't have any options\n  const shouldDisable = disabled || !hasOptions\n\n  const spacerNeeded = (caption: string): string => {\n    // When captions are provided for only some options in horizontal\n    // layout we need to add a spacer for the options without captions\n    const spacer = caption == \"\" && horizontal && hasCaptions\n    return spacer ? \"&nbsp;\" : caption\n  }\n\n  return (\n    <div className=\"stRadio\" data-testid=\"stRadio\" style={style}>\n      <WidgetLabel\n        label={label}\n        disabled={shouldDisable}\n        labelVisibility={labelVisibility}\n      >\n        {help && (\n          <StyledWidgetLabelHelpInline>\n            <TooltipIcon content={help} placement={Placement.TOP_RIGHT} />\n          </StyledWidgetLabelHelpInline>\n        )}\n      </WidgetLabel>\n      <RadioGroup\n        onChange={onChangeCallback}\n        value={value !== null ? value.toString() : undefined}\n        disabled={shouldDisable}\n        align={horizontal ? ALIGN.horizontal : ALIGN.vertical}\n        aria-label={label}\n        data-testid=\"stRadioGroup\"\n        overrides={{\n          RadioGroupRoot: {\n            style: {\n              gap: hasCaptions ? theme.spacing.sm : theme.spacing.none,\n              minHeight: theme.sizes.minElementHeight,\n            },\n          },\n        }}\n      >\n        {cleanedOptions.map((option: string, index: number) => (\n          <UIRadio\n            key={index}\n            value={index.toString()}\n            overrides={{\n              Root: {\n                style: ({\n                  $isFocusVisible,\n                }: {\n                  $isFocusVisible: boolean\n                }) => ({\n                  marginBottom: theme.spacing.none,\n                  marginTop: theme.spacing.none,\n                  marginRight: hasCaptions\n                    ? theme.spacing.sm\n                    : theme.spacing.lg,\n                  // Make left and right padding look the same visually.\n                  paddingLeft: theme.spacing.none,\n                  alignItems: \"start\",\n                  paddingRight: theme.spacing.threeXS,\n                  backgroundColor: $isFocusVisible\n                    ? colors.darkenedBgMix25\n                    : \"\",\n                  borderTopLeftRadius: radii.md,\n                  borderTopRightRadius: radii.md,\n                  borderBottomLeftRadius: radii.md,\n                  borderBottomRightRadius: radii.md,\n                }),\n              },\n              RadioMarkOuter: {\n                style: ({ $checked }: { $checked: boolean }) => ({\n                  width: theme.sizes.checkbox,\n                  height: theme.sizes.checkbox,\n                  marginTop: \"0.35rem\",\n                  marginRight: theme.spacing.none,\n                  marginLeft: theme.spacing.none,\n                  backgroundColor:\n                    $checked && !shouldDisable\n                      ? colors.primary\n                      : colors.fadedText40,\n                }),\n              },\n              RadioMarkInner: {\n                style: ({ $checked }: { $checked: boolean }) => ({\n                  height: $checked\n                    ? \"6px\"\n                    : `calc(${theme.sizes.checkbox} - ${theme.spacing.threeXS})`,\n                  width: $checked\n                    ? \"6px\"\n                    : `calc(${theme.sizes.checkbox} - ${theme.spacing.threeXS})`,\n                }),\n              },\n              Label: {\n                style: {\n                  color: shouldDisable ? colors.fadedText40 : colors.bodyText,\n                  position: \"relative\",\n                  top: theme.spacing.px,\n                },\n              },\n            }}\n          >\n            <StreamlitMarkdown\n              source={option}\n              allowHTML={false}\n              isLabel\n              largerLabel\n            />\n            {hasCaptions && (\n              <StreamlitMarkdown\n                source={spacerNeeded(captions[index])}\n                allowHTML={false}\n                isCaption\n                isLabel\n              />\n            )}\n          </UIRadio>\n        ))}\n      </RadioGroup>\n    </div>\n  )\n}\n\nexport default memo(Radio)\n"],"mappings":"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"}