{"version":3,"file":"VirtualDropdown.js","names":["React","StyledList","StyledEmptyState","FixedSizeList","Placement","OverflowTooltip","ThemedStyledDropdownListItem","jsx","_jsx","LIST_ITEM_HEIGHT","EMPTY_LIST_HEIGHT","MAX_LIST_HEIGHT","FixedSizeListItem","props","data","index","style","item","overrides","restChildProps","children","content","label","placement","AUTO","value","VirtualDropdown","forwardRef","ref","Children","toArray","childrenProps","$style","height","concat","Math","min","length","paddingTop","paddingBottom","width","itemCount","itemData","itemKey","itemSize","displayName"],"sources":["../../../../src/components/shared/Dropdown/VirtualDropdown.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from \"react\"\nimport { StyledList, StyledEmptyState, OptionListProps } from \"baseui/menu\"\nimport { FixedSizeList } from \"react-window\"\nimport {\n  Placement,\n  OverflowTooltip,\n} from \"@streamlit/lib/src/components/shared/Tooltip\"\nimport { ThemedStyledDropdownListItem } from \"./styled-components\"\n\nconst LIST_ITEM_HEIGHT = 40\nconst EMPTY_LIST_HEIGHT = 90\nconst MAX_LIST_HEIGHT = 300\n\n/*\n * A component that renders a large dropdown to render only a fixed amount of\n * options at a time. Overall, the dropdown improves performance for\n * [Multi]Select components to display a practically large number of options.\n */\ninterface FixedSizeListItemProps {\n  data: { props: OptionListProps }[]\n  index: number\n  style: React.CSSProperties\n}\n\nfunction FixedSizeListItem(props: FixedSizeListItemProps): ReactElement {\n  const { data, index, style } = props\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const { item, overrides, ...restChildProps } = data[index].props\n  return (\n    <ThemedStyledDropdownListItem\n      key={item.value}\n      style={style}\n      {...restChildProps}\n    >\n      <OverflowTooltip content={item.label} placement={Placement.AUTO}>\n        {item.label}\n      </OverflowTooltip>\n    </ThemedStyledDropdownListItem>\n  )\n}\n\nconst VirtualDropdown = React.forwardRef<any, any>((props, ref) => {\n  const children = React.Children.toArray(props.children) as ReactElement[]\n\n  if (!children[0] || !children[0].props.item) {\n    const childrenProps = children[0] ? children[0].props : {}\n    return (\n      <StyledList\n        $style={{ height: `${EMPTY_LIST_HEIGHT}px` }}\n        ref={ref}\n        data-testid=\"stVirtualDropdownEmpty\"\n      >\n        <StyledEmptyState {...childrenProps} />\n      </StyledList>\n    )\n  }\n\n  const height = Math.min(MAX_LIST_HEIGHT, children.length * LIST_ITEM_HEIGHT)\n\n  return (\n    <StyledList\n      ref={ref}\n      $style={{ paddingTop: 0, paddingBottom: 0 }}\n      data-testid=\"stVirtualDropdown\"\n    >\n      <FixedSizeList\n        width=\"100%\"\n        height={height}\n        itemCount={children.length}\n        itemData={children}\n        itemKey={(index: number, data: { props: OptionListProps }[]) =>\n          data[index].props.item.value\n        }\n        itemSize={LIST_ITEM_HEIGHT}\n      >\n        {FixedSizeListItem}\n      </FixedSizeList>\n    </StyledList>\n  )\n})\n\nVirtualDropdown.displayName = \"VirtualDropdown\"\n\nexport default VirtualDropdown\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAwB,OAAO;AAC3C,SAASC,UAAU,EAAEC,gBAAgB,QAAyB,aAAa;AAC3E,SAASC,aAAa,QAAQ,cAAc;AAC5C,SACEC,SAAS,EACTC,eAAe;AAEjB,SAASC,4BAA4B;AAA6B,SAAAC,GAAA,IAAAC,IAAA;AAElE,MAAMC,gBAAgB,GAAG,EAAE;AAC3B,MAAMC,iBAAiB,GAAG,EAAE;AAC5B,MAAMC,eAAe,GAAG,GAAG;;AAE3B;AACA;AACA;AACA;AACA;;AAOA,SAASC,iBAAiBA,CAACC,KAA6B,EAAgB;EACtE,MAAM;IAAEC,IAAI;IAAEC,KAAK;IAAEC;EAAM,CAAC,GAAGH,KAAK;EACpC;EACA,MAAM;IAAEI,IAAI;IAAEC,SAAS;IAAE,GAAGC;EAAe,CAAC,GAAGL,IAAI,CAACC,KAAK,CAAC,CAACF,KAAK;EAChE,oBACEL,IAAA,CAACF,4BAA4B;IAE3BU,KAAK,EAAEA,KAAM;IAAA,GACTG,cAAc;IAAAC,QAAA,eAElBZ,IAAA,CAACH,eAAe;MAACgB,OAAO,EAAEJ,IAAI,CAACK,KAAM;MAACC,SAAS,EAAEnB,SAAS,CAACoB,IAAK;MAAAJ,QAAA,EAC7DH,IAAI,CAACK;IAAK,CACI;EAAC,GANbL,IAAI,CAACQ,KAOkB,CAAC;AAEnC;AAEA,MAAMC,eAAe,gBAAG1B,KAAK,CAAC2B,UAAU,CAAW,CAACd,KAAK,EAAEe,GAAG,KAAK;EACjE,MAAMR,QAAQ,GAAGpB,KAAK,CAAC6B,QAAQ,CAACC,OAAO,CAACjB,KAAK,CAACO,QAAQ,CAAmB;EAEzE,IAAI,CAACA,QAAQ,CAAC,CAAC,CAAC,IAAI,CAACA,QAAQ,CAAC,CAAC,CAAC,CAACP,KAAK,CAACI,IAAI,EAAE;IAC3C,MAAMc,aAAa,GAAGX,QAAQ,CAAC,CAAC,CAAC,GAAGA,QAAQ,CAAC,CAAC,CAAC,CAACP,KAAK,GAAG,CAAC,CAAC;IAC1D,oBACEL,IAAA,CAACP,UAAU;MACT+B,MAAM,EAAE;QAAEC,MAAM,KAAAC,MAAA,CAAKxB,iBAAiB;MAAK,CAAE;MAC7CkB,GAAG,EAAEA,GAAI;MACT,eAAY,wBAAwB;MAAAR,QAAA,eAEpCZ,IAAA,CAACN,gBAAgB;QAAA,GAAK6B;MAAa,CAAG;IAAC,CAC7B,CAAC;EAEjB;EAEA,MAAME,MAAM,GAAGE,IAAI,CAACC,GAAG,CAACzB,eAAe,EAAES,QAAQ,CAACiB,MAAM,GAAG5B,gBAAgB,CAAC;EAE5E,oBACED,IAAA,CAACP,UAAU;IACT2B,GAAG,EAAEA,GAAI;IACTI,MAAM,EAAE;MAAEM,UAAU,EAAE,CAAC;MAAEC,aAAa,EAAE;IAAE,CAAE;IAC5C,eAAY,mBAAmB;IAAAnB,QAAA,eAE/BZ,IAAA,CAACL,aAAa;MACZqC,KAAK,EAAC,MAAM;MACZP,MAAM,EAAEA,MAAO;MACfQ,SAAS,EAAErB,QAAQ,CAACiB,MAAO;MAC3BK,QAAQ,EAAEtB,QAAS;MACnBuB,OAAO,EAAEA,CAAC5B,KAAa,EAAED,IAAkC,KACzDA,IAAI,CAACC,KAAK,CAAC,CAACF,KAAK,CAACI,IAAI,CAACQ,KACxB;MACDmB,QAAQ,EAAEnC,gBAAiB;MAAAW,QAAA,EAE1BR;IAAiB,CACL;EAAC,CACN,CAAC;AAEjB,CAAC,CAAC;AAEFc,eAAe,CAACmB,WAAW,GAAG,iBAAiB;AAE/C,eAAenB,eAAe"}