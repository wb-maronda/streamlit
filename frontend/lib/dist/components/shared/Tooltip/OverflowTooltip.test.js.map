{"version":3,"file":"OverflowTooltip.test.js","names":["React","fireEvent","screen","render","OverflowTooltip","Placement","jsx","_jsx","describe","afterEach","jest","restoreAllMocks","it","useRefSpy","spyOn","mockReturnValue","current","offsetWidth","scrollWidth","mockImplementation","f","content","placement","AUTO","style","children","tooltip","getByTestId","mouseOver","expect","queryByText","not","toBeInTheDocument","toHaveBeenCalledWith","tooltipContent","findByText"],"sources":["../../../../src/components/shared/Tooltip/OverflowTooltip.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport \"@testing-library/jest-dom\"\nimport { fireEvent, screen } from \"@testing-library/react\"\n\nimport { render } from \"@streamlit/lib/src/test_util\"\n\nimport OverflowTooltip from \"./OverflowTooltip\"\nimport { Placement } from \"./Tooltip\"\n\ndescribe(\"Tooltip component\", () => {\n  afterEach(() => {\n    jest.restoreAllMocks()\n  })\n\n  it(\"should render when it fits onscreen\", () => {\n    const useRefSpy = jest.spyOn(React, \"useRef\").mockReturnValue({\n      current: {\n        // Pretend the body is greater than its onscreen area.\n        offsetWidth: 200,\n        scrollWidth: 100,\n      },\n    })\n\n    jest.spyOn(React, \"useEffect\").mockImplementation(f => f())\n\n    render(\n      <OverflowTooltip\n        content=\"the content\"\n        placement={Placement.AUTO}\n        style={{}}\n      >\n        the child\n      </OverflowTooltip>\n    )\n\n    const tooltip = screen.getByTestId(\"stTooltipHoverTarget\")\n    fireEvent.mouseOver(tooltip)\n\n    expect(screen.queryByText(\"the content\")).not.toBeInTheDocument()\n\n    expect(useRefSpy).toHaveBeenCalledWith(null)\n  })\n\n  it(\"should render when ellipsized\", async () => {\n    const useRefSpy = jest.spyOn(React, \"useRef\").mockReturnValue({\n      current: {\n        // Pretend the body is smaller than its onscreen area.\n        offsetWidth: 100,\n        scrollWidth: 200,\n      },\n    })\n\n    jest.spyOn(React, \"useEffect\").mockImplementation(f => f())\n\n    render(\n      <OverflowTooltip\n        content=\"the content\"\n        placement={Placement.AUTO}\n        style={{}}\n      >\n        the child\n      </OverflowTooltip>\n    )\n\n    const tooltip = screen.getByTestId(\"stTooltipHoverTarget\")\n    fireEvent.mouseOver(tooltip)\n\n    const tooltipContent = await screen.findByText(\"the content\")\n    expect(tooltipContent).toBeInTheDocument()\n\n    expect(useRefSpy).toHaveBeenCalledWith(null)\n  })\n})\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,2BAA2B;AAClC,SAASC,SAAS,EAAEC,MAAM,QAAQ,wBAAwB;AAE1D,SAASC,MAAM;AAEf,OAAOC,eAAe;AACtB,SAASC,SAAS;AAAmB,SAAAC,GAAA,IAAAC,IAAA;AAErCC,QAAQ,CAAC,mBAAmB,EAAE,MAAM;EAClCC,SAAS,CAAC,MAAM;IACdC,IAAI,CAACC,eAAe,CAAC,CAAC;EACxB,CAAC,CAAC;EAEFC,EAAE,CAAC,qCAAqC,EAAE,MAAM;IAC9C,MAAMC,SAAS,GAAGH,IAAI,CAACI,KAAK,CAACd,KAAK,EAAE,QAAQ,CAAC,CAACe,eAAe,CAAC;MAC5DC,OAAO,EAAE;QACP;QACAC,WAAW,EAAE,GAAG;QAChBC,WAAW,EAAE;MACf;IACF,CAAC,CAAC;IAEFR,IAAI,CAACI,KAAK,CAACd,KAAK,EAAE,WAAW,CAAC,CAACmB,kBAAkB,CAACC,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC;IAE3DjB,MAAM,eACJI,IAAA,CAACH,eAAe;MACdiB,OAAO,EAAC,aAAa;MACrBC,SAAS,EAAEjB,SAAS,CAACkB,IAAK;MAC1BC,KAAK,EAAE,CAAC,CAAE;MAAAC,QAAA,EACX;IAED,CAAiB,CACnB,CAAC;IAED,MAAMC,OAAO,GAAGxB,MAAM,CAACyB,WAAW,CAAC,sBAAsB,CAAC;IAC1D1B,SAAS,CAAC2B,SAAS,CAACF,OAAO,CAAC;IAE5BG,MAAM,CAAC3B,MAAM,CAAC4B,WAAW,CAAC,aAAa,CAAC,CAAC,CAACC,GAAG,CAACC,iBAAiB,CAAC,CAAC;IAEjEH,MAAM,CAAChB,SAAS,CAAC,CAACoB,oBAAoB,CAAC,IAAI,CAAC;EAC9C,CAAC,CAAC;EAEFrB,EAAE,CAAC,+BAA+B,EAAE,YAAY;IAC9C,MAAMC,SAAS,GAAGH,IAAI,CAACI,KAAK,CAACd,KAAK,EAAE,QAAQ,CAAC,CAACe,eAAe,CAAC;MAC5DC,OAAO,EAAE;QACP;QACAC,WAAW,EAAE,GAAG;QAChBC,WAAW,EAAE;MACf;IACF,CAAC,CAAC;IAEFR,IAAI,CAACI,KAAK,CAACd,KAAK,EAAE,WAAW,CAAC,CAACmB,kBAAkB,CAACC,CAAC,IAAIA,CAAC,CAAC,CAAC,CAAC;IAE3DjB,MAAM,eACJI,IAAA,CAACH,eAAe;MACdiB,OAAO,EAAC,aAAa;MACrBC,SAAS,EAAEjB,SAAS,CAACkB,IAAK;MAC1BC,KAAK,EAAE,CAAC,CAAE;MAAAC,QAAA,EACX;IAED,CAAiB,CACnB,CAAC;IAED,MAAMC,OAAO,GAAGxB,MAAM,CAACyB,WAAW,CAAC,sBAAsB,CAAC;IAC1D1B,SAAS,CAAC2B,SAAS,CAACF,OAAO,CAAC;IAE5B,MAAMQ,cAAc,GAAG,MAAMhC,MAAM,CAACiC,UAAU,CAAC,aAAa,CAAC;IAC7DN,MAAM,CAACK,cAAc,CAAC,CAACF,iBAAiB,CAAC,CAAC;IAE1CH,MAAM,CAAChB,SAAS,CAAC,CAACoB,oBAAoB,CAAC,IAAI,CAAC;EAC9C,CAAC,CAAC;AACJ,CAAC,CAAC"}