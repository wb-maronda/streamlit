{"version":3,"file":"FullScreenWrapper.js","names":["React","PureComponent","withTheme","FullscreenEnter","FullscreenExit","Icon","LibContext","StyledFullScreenButton","StyledFullScreenFrame","jsx","_jsx","jsxs","_jsxs","FullScreenWrapper","constructor","props","context","controlKeys","event","expanded","state","keyCode","zoomOut","zoomIn","document","body","style","overflow","setFullScreen","setState","convertScssRemValueToPixels","scssValue","remValue","parseFloat","getComputedStyle","documentElement","fontSize","getWindowDimensions","padding","theme","spacing","md","paddingTop","sizes","fullScreenHeaderHeight","fullWidth","window","innerWidth","fullHeight","innerHeight","updateWindowDimensions","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","children","width","height","disableFullscreenMode","buttonImage","buttonOnClick","buttonTitle","isExpanded","onClick","title","content","expand","collapse","contextType"],"sources":["../../../../src/components/shared/FullScreenWrapper/FullScreenWrapper.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PureComponent } from \"react\"\n\nimport { withTheme } from \"@emotion/react\"\nimport { FullscreenEnter, FullscreenExit } from \"@emotion-icons/open-iconic\"\n\nimport Icon from \"@streamlit/lib/src/components/shared/Icon\"\nimport { LibContext } from \"@streamlit/lib/src/components/core/LibContext\"\nimport { EmotionTheme } from \"@streamlit/lib/src/theme\"\n\nimport {\n  StyledFullScreenButton,\n  StyledFullScreenFrame,\n} from \"./styled-components\"\n\nexport type Size = {\n  width: number\n  expanded: boolean\n  height?: number\n  expand: () => void\n  collapse: () => void\n}\n\n/*\n * Function responsible for rendering children.\n * This function should implement the following signature:\n * ({ height, width }) => PropTypes.element\n */\nexport interface FullScreenWrapperProps {\n  children: (props: Size) => React.ReactNode\n  width: number\n  height?: number\n  theme: EmotionTheme\n  disableFullscreenMode?: boolean\n}\n\ninterface State {\n  expanded: boolean\n  fullWidth: number\n  fullHeight: number\n}\n\n/*\n * A component that draws a button on the top right of the\n * wrapper element. OnClick, change the element container\n * to fixed and cover all screen, updating wrapped element height and width\n */\nclass FullScreenWrapper extends PureComponent<FullScreenWrapperProps, State> {\n  public context!: React.ContextType<typeof LibContext>\n\n  public static contextType = LibContext\n\n  public constructor(props: FullScreenWrapperProps) {\n    super(props)\n    this.state = {\n      expanded: false,\n      ...this.getWindowDimensions(),\n    }\n  }\n\n  public componentDidMount(): void {\n    window.addEventListener(\"resize\", this.updateWindowDimensions)\n    document.addEventListener(\"keydown\", this.controlKeys, false)\n  }\n\n  public componentWillUnmount(): void {\n    window.removeEventListener(\"resize\", this.updateWindowDimensions)\n    document.removeEventListener(\"keydown\", this.controlKeys, false)\n  }\n\n  private controlKeys = (event: any): void => {\n    const { expanded } = this.state\n\n    if (event.keyCode === 27 && expanded) {\n      // Exit fullscreen\n      this.zoomOut()\n    }\n  }\n\n  private zoomIn = (): void => {\n    document.body.style.overflow = \"hidden\"\n    this.context.setFullScreen(true)\n    this.setState({ expanded: true })\n  }\n\n  private zoomOut = (): void => {\n    document.body.style.overflow = \"unset\"\n    this.context.setFullScreen(false)\n    this.setState({ expanded: false })\n  }\n\n  private convertScssRemValueToPixels = (scssValue: string): number => {\n    const remValue = parseFloat(scssValue)\n    return (\n      remValue *\n      parseFloat(getComputedStyle(document.documentElement).fontSize)\n    )\n  }\n\n  private getWindowDimensions = (): Pick<\n    State,\n    \"fullWidth\" | \"fullHeight\"\n  > => {\n    const padding = this.convertScssRemValueToPixels(\n      this.props.theme.spacing.md\n    )\n    const paddingTop = this.convertScssRemValueToPixels(\n      this.props.theme.sizes.fullScreenHeaderHeight\n    )\n\n    return {\n      fullWidth: window.innerWidth - padding * 2, // Left and right\n      fullHeight: window.innerHeight - (padding + paddingTop), // Bottom and Top\n    }\n  }\n\n  private updateWindowDimensions = (): void => {\n    this.setState(this.getWindowDimensions())\n  }\n\n  public render(): JSX.Element {\n    const { expanded, fullWidth, fullHeight } = this.state\n    const { children, width, height, disableFullscreenMode } = this.props\n\n    let buttonImage = FullscreenEnter\n    let buttonOnClick = this.zoomIn\n    let buttonTitle = \"View fullscreen\"\n\n    if (expanded) {\n      buttonImage = FullscreenExit\n      buttonOnClick = this.zoomOut\n      buttonTitle = \"Exit fullscreen\"\n    }\n\n    return (\n      <StyledFullScreenFrame\n        isExpanded={expanded}\n        data-testid=\"stFullScreenFrame\"\n      >\n        {!disableFullscreenMode && (\n          <StyledFullScreenButton\n            data-testid=\"StyledFullScreenButton\"\n            onClick={buttonOnClick}\n            title={buttonTitle}\n            isExpanded={expanded}\n          >\n            <Icon content={buttonImage} />\n          </StyledFullScreenButton>\n        )}\n        {expanded\n          ? children({\n              width: fullWidth,\n              height: fullHeight,\n              expanded,\n              expand: this.zoomIn,\n              collapse: this.zoomOut,\n            })\n          : children({\n              width,\n              height,\n              expanded,\n              expand: this.zoomIn,\n              collapse: this.zoomOut,\n            })}\n      </StyledFullScreenFrame>\n    )\n  }\n}\n\nexport default withTheme(FullScreenWrapper)\n"],"mappings":"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"}