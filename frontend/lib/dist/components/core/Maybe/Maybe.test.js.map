{"version":3,"file":"Maybe.test.js","names":["React","render","Maybe","jsx","_jsx","Inner","props","children","name","Outer","enable","describe","afterEach","jest","restoreAllMocks","it","rerender","spyShouldComponentUpdate","spyOn","prototype","spyRender","expect","toHaveBeenCalled","toHaveBeenCalledTimes"],"sources":["../../../../src/components/core/Maybe/Maybe.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\nimport { render } from \"@streamlit/lib/src/test_util\"\nimport Maybe from \"./Maybe\"\n\ninterface OuterProps {\n  name: string\n  enable: boolean\n}\n\ninterface InnerProps {\n  name: string\n}\nconst Inner = (props: InnerProps): any => <div>{props.name}</div>\n\nconst Outer = (props: OuterProps): any => (\n  <Maybe enable={props.enable}>\n    <Inner name={props.name} />\n  </Maybe>\n)\n\ndescribe(\"The Maybe component\", () => {\n  describe(\"when enable is true\", () => {\n    afterEach(() => {\n      jest.restoreAllMocks()\n    })\n\n    it(\"should invoke the render method when the props of an enclosing element update\", () => {\n      const { rerender } = render(<Outer name={\"old again\"} enable={true} />)\n\n      const spyShouldComponentUpdate = jest.spyOn(\n        Maybe.prototype,\n        \"shouldComponentUpdate\"\n      )\n      const spyRender = jest.spyOn(Maybe.prototype, \"render\")\n\n      rerender(<Outer name={\"new name\"} enable={true} />)\n\n      expect(spyShouldComponentUpdate).toHaveBeenCalled()\n      expect(spyRender).toHaveBeenCalled()\n    })\n\n    it(\"should call render() when a Maybe is first disabled\", () => {\n      const { rerender } = render(<Outer name={\"old again\"} enable={true} />)\n\n      const spyShouldComponentUpdate = jest.spyOn(\n        Maybe.prototype,\n        \"shouldComponentUpdate\"\n      )\n      const spyRender = jest.spyOn(Maybe.prototype, \"render\")\n\n      rerender(<Outer name={\"new name\"} enable={false} />)\n\n      expect(spyShouldComponentUpdate).toHaveBeenCalled()\n      expect(spyRender).toHaveBeenCalled()\n    })\n  })\n\n  describe(\"when enable is false\", () => {\n    it(\"should not invoke the render method when the props of an enclosing element update\", () => {\n      const { rerender } = render(<Outer name={\"old again\"} enable={false} />)\n\n      const spyShouldComponentUpdate = jest.spyOn(\n        Maybe.prototype,\n        \"shouldComponentUpdate\"\n      )\n      const spyRender = jest.spyOn(Maybe.prototype, \"render\")\n\n      rerender(<Outer name={\"new name\"} enable={false} />)\n\n      expect(spyShouldComponentUpdate).toHaveBeenCalled()\n      expect(spyRender).toHaveBeenCalledTimes(0)\n    })\n  })\n})\n"],"mappings":"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"}