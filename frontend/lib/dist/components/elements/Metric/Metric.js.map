{"version":3,"file":"Metric.js","names":["React","useTheme","ArrowDownward","ArrowUpward","Metric","MetricProto","labelVisibilityProtoValueToEnum","Icon","StyledWidgetLabelHelpInline","TooltipIcon","Placement","StreamlitMarkdown","StyledMetricDeltaText","StyledMetricLabelText","StyledMetricValueText","StyledTruncateText","jsx","_jsx","jsxs","_jsxs","_ref","element","colors","MetricColor","MetricDirection","direction","color","RED","red","GREEN","green","fadedText60","DOWN","UP","arrowMargin","deltaStyle","deltaExists","delta","className","children","visibility","labelVisibility","value","source","label","allowHTML","isLabel","help","content","placement","TOP_RIGHT","body","style","testid","size","margin"],"sources":["../../../../src/components/elements/Metric/Metric.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport { ArrowDownward, ArrowUpward } from \"@emotion-icons/material-outlined\"\n\nimport { Metric as MetricProto } from \"@streamlit/lib/src/proto\"\nimport { EmotionTheme } from \"@streamlit/lib/src/theme\"\nimport { labelVisibilityProtoValueToEnum } from \"@streamlit/lib/src/util/utils\"\nimport Icon from \"@streamlit/lib/src/components/shared/Icon\"\nimport { StyledWidgetLabelHelpInline } from \"@streamlit/lib/src/components/widgets/BaseWidget\"\nimport TooltipIcon from \"@streamlit/lib/src/components/shared/TooltipIcon\"\nimport { Placement } from \"@streamlit/lib/src/components/shared/Tooltip\"\nimport StreamlitMarkdown from \"@streamlit/lib/src/components/shared/StreamlitMarkdown\"\n\nimport {\n  StyledMetricDeltaText,\n  StyledMetricLabelText,\n  StyledMetricValueText,\n  StyledTruncateText,\n} from \"./styled-components\"\n\nexport interface MetricProps {\n  element: MetricProto\n}\n\nexport default function Metric({\n  element,\n}: Readonly<MetricProps>): ReactElement {\n  const { colors }: EmotionTheme = useTheme()\n  const { MetricColor, MetricDirection } = MetricProto\n\n  let direction: any = null\n  let color = \"\"\n\n  switch (element.color) {\n    case MetricColor.RED:\n      color = colors.red\n      break\n    case MetricColor.GREEN:\n      color = colors.green\n      break\n    // this must be grey\n    default:\n      color = colors.fadedText60\n      break\n  }\n\n  switch (element.direction) {\n    case MetricDirection.DOWN:\n      direction = ArrowDownward\n      break\n    case MetricDirection.UP:\n      direction = ArrowUpward\n      break\n    // this must be none\n    default:\n      direction = null\n      break\n  }\n\n  const arrowMargin = \"0 threeXS 0 0\"\n  const deltaStyle = { color }\n  const deltaExists = element.delta !== \"\"\n\n  return (\n    <div className=\"stMetric\" data-testid=\"stMetric\">\n      <StyledMetricLabelText\n        data-testid=\"stMetricLabel\"\n        visibility={labelVisibilityProtoValueToEnum(\n          element.labelVisibility?.value\n        )}\n      >\n        <StyledTruncateText>\n          <StreamlitMarkdown\n            source={element.label}\n            allowHTML={false}\n            isLabel\n          />\n        </StyledTruncateText>\n        {element.help && (\n          <StyledWidgetLabelHelpInline>\n            <TooltipIcon\n              content={element.help}\n              placement={Placement.TOP_RIGHT}\n            />\n          </StyledWidgetLabelHelpInline>\n        )}\n      </StyledMetricLabelText>\n      <StyledMetricValueText data-testid=\"stMetricValue\">\n        <StyledTruncateText> {element.body} </StyledTruncateText>\n      </StyledMetricValueText>\n      {deltaExists && (\n        <StyledMetricDeltaText data-testid=\"stMetricDelta\" style={deltaStyle}>\n          <Icon\n            testid={\n              // if direction is null, icon will be null\n              direction === ArrowUpward\n                ? \"stMetricDeltaIcon-Up\"\n                : \"stMetricDeltaIcon-Down\"\n            }\n            content={direction}\n            size=\"lg\"\n            margin={arrowMargin}\n          />\n          <StyledTruncateText> {element.delta} </StyledTruncateText>\n        </StyledMetricDeltaText>\n      )}\n    </div>\n  )\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAwB,OAAO;AAE3C,SAASC,QAAQ,QAAQ,gBAAgB;AACzC,SAASC,aAAa,EAAEC,WAAW,QAAQ,kCAAkC;AAE7E,SAASC,MAAM,IAAIC,WAAW;AAE9B,SAASC,+BAA+B;AACxC,OAAOC,IAAI;AACX,SAASC,2BAA2B;AACpC,OAAOC,WAAW;AAClB,SAASC,SAAS;AAClB,OAAOC,iBAAiB;AAExB,SACEC,qBAAqB,EACrBC,qBAAqB,EACrBC,qBAAqB,EACrBC,kBAAkB;AACQ,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAM5B,eAAe,SAASf,MAAMA,CAAAgB,IAAA,EAEU;EAAA,IAFT;IAC7BC;EACqB,CAAC,GAAAD,IAAA;EACtB,MAAM;IAAEE;EAAqB,CAAC,GAAGrB,QAAQ,CAAC,CAAC;EAC3C,MAAM;IAAEsB,WAAW;IAAEC;EAAgB,CAAC,GAAGnB,WAAW;EAEpD,IAAIoB,SAAc,GAAG,IAAI;EACzB,IAAIC,KAAK,GAAG,EAAE;EAEd,QAAQL,OAAO,CAACK,KAAK;IACnB,KAAKH,WAAW,CAACI,GAAG;MAClBD,KAAK,GAAGJ,MAAM,CAACM,GAAG;MAClB;IACF,KAAKL,WAAW,CAACM,KAAK;MACpBH,KAAK,GAAGJ,MAAM,CAACQ,KAAK;MACpB;IACF;IACA;MACEJ,KAAK,GAAGJ,MAAM,CAACS,WAAW;MAC1B;EACJ;EAEA,QAAQV,OAAO,CAACI,SAAS;IACvB,KAAKD,eAAe,CAACQ,IAAI;MACvBP,SAAS,GAAGvB,aAAa;MACzB;IACF,KAAKsB,eAAe,CAACS,EAAE;MACrBR,SAAS,GAAGtB,WAAW;MACvB;IACF;IACA;MACEsB,SAAS,GAAG,IAAI;MAChB;EACJ;EAEA,MAAMS,WAAW,GAAG,eAAe;EACnC,MAAMC,UAAU,GAAG;IAAET;EAAM,CAAC;EAC5B,MAAMU,WAAW,GAAGf,OAAO,CAACgB,KAAK,KAAK,EAAE;EAExC,oBACElB,KAAA;IAAKmB,SAAS,EAAC,UAAU;IAAC,eAAY,UAAU;IAAAC,QAAA,gBAC9CpB,KAAA,CAACN,qBAAqB;MACpB,eAAY,eAAe;MAC3B2B,UAAU,EAAElC,+BAA+B,CACzCe,OAAO,CAACoB,eAAe,EAAEC,KAC3B,CAAE;MAAAH,QAAA,gBAEFtB,IAAA,CAACF,kBAAkB;QAAAwB,QAAA,eACjBtB,IAAA,CAACN,iBAAiB;UAChBgC,MAAM,EAAEtB,OAAO,CAACuB,KAAM;UACtBC,SAAS,EAAE,KAAM;UACjBC,OAAO;QAAA,CACR;MAAC,CACgB,CAAC,EACpBzB,OAAO,CAAC0B,IAAI,iBACX9B,IAAA,CAACT,2BAA2B;QAAA+B,QAAA,eAC1BtB,IAAA,CAACR,WAAW;UACVuC,OAAO,EAAE3B,OAAO,CAAC0B,IAAK;UACtBE,SAAS,EAAEvC,SAAS,CAACwC;QAAU,CAChC;MAAC,CACyB,CAC9B;IAAA,CACoB,CAAC,eACxBjC,IAAA,CAACH,qBAAqB;MAAC,eAAY,eAAe;MAAAyB,QAAA,eAChDpB,KAAA,CAACJ,kBAAkB;QAAAwB,QAAA,GAAC,GAAC,EAAClB,OAAO,CAAC8B,IAAI,EAAC,GAAC;MAAA,CAAoB;IAAC,CACpC,CAAC,EACvBf,WAAW,iBACVjB,KAAA,CAACP,qBAAqB;MAAC,eAAY,eAAe;MAACwC,KAAK,EAAEjB,UAAW;MAAAI,QAAA,gBACnEtB,IAAA,CAACV,IAAI;QACH8C,MAAM;QACJ;QACA5B,SAAS,KAAKtB,WAAW,GACrB,sBAAsB,GACtB,wBACL;QACD6C,OAAO,EAAEvB,SAAU;QACnB6B,IAAI,EAAC,IAAI;QACTC,MAAM,EAAErB;MAAY,CACrB,CAAC,eACFf,KAAA,CAACJ,kBAAkB;QAAAwB,QAAA,GAAC,GAAC,EAAClB,OAAO,CAACgB,KAAK,EAAC,GAAC;MAAA,CAAoB,CAAC;IAAA,CACrC,CACxB;EAAA,CACE,CAAC;AAEV"}