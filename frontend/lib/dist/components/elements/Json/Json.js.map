{"version":3,"file":"Json.js","names":["React","useTheme","JSON5","ReactJson","ErrorElement","hasLightBackgroundColor","ensureError","jsx","_jsx","Json","_ref","width","element","styleProp","theme","bodyObject","JSON","parse","body","e","error","json5Error","pos","parseInt","message","replace","concat","substring","name","jsonTheme","style","children","src","collapsed","expanded","displayDataTypes","displayObjectSize","fontFamily","genericFonts","codeFont","fontSize","fontSizes","sm","backgroundColor","colors","bgColor","whiteSpace"],"sources":["../../../../src/components/elements/Json/Json.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from \"react\"\nimport { useTheme } from \"@emotion/react\"\nimport JSON5 from \"json5\"\nimport ReactJson from \"react-json-view\"\nimport ErrorElement from \"@streamlit/lib/src/components/shared/ErrorElement\"\n\nimport { Json as JsonProto } from \"@streamlit/lib/src/proto\"\nimport {\n  hasLightBackgroundColor,\n  EmotionTheme,\n} from \"@streamlit/lib/src/theme\"\nimport { ensureError } from \"@streamlit/lib/src/util/ErrorHandling\"\n\nexport interface JsonProps {\n  width: number\n  element: JsonProto\n}\n\n/**\n * Functional element representing JSON structured text.\n */\nexport default function Json({ width, element }: JsonProps): ReactElement {\n  const styleProp = { width }\n  const theme: EmotionTheme = useTheme()\n\n  let bodyObject\n  try {\n    bodyObject = JSON.parse(element.body)\n  } catch (e) {\n    const error = ensureError(e)\n    try {\n      bodyObject = JSON5.parse(element.body)\n    } catch (json5Error) {\n      // If content fails to parse as Json, rebuild the error message\n      // to show where the problem occurred.\n      const pos = parseInt(error.message.replace(/[^0-9]/g, \"\"), 10)\n      error.message += `\\n${element.body.substring(0, pos + 1)} ‚Üê here`\n      return <ErrorElement name={\"Json Parse Error\"} message={error.message} />\n    }\n  }\n\n  // Try to pick a reasonable ReactJson theme based on whether the streamlit\n  // theme's background is light or dark.\n  const jsonTheme = hasLightBackgroundColor(theme) ? \"rjv-default\" : \"monokai\"\n\n  return (\n    <div data-testid=\"stJson\" style={styleProp}>\n      <ReactJson\n        src={bodyObject}\n        collapsed={!element.expanded}\n        displayDataTypes={false}\n        displayObjectSize={false}\n        name={false}\n        theme={jsonTheme}\n        style={{\n          fontFamily: theme.genericFonts.codeFont,\n          fontSize: theme.fontSizes.sm,\n          backgroundColor: theme.colors.bgColor,\n          whiteSpace: \"pre-wrap\", // preserve whitespace\n        }}\n      />\n    </div>\n  )\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAwB,OAAO;AAC3C,SAASC,QAAQ,QAAQ,gBAAgB;AACzC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,iBAAiB;AACvC,OAAOC,YAAY;AAGnB,SACEC,uBAAuB;AAGzB,SAASC,WAAW;AAA+C,SAAAC,GAAA,IAAAC,IAAA;AAOnE;AACA;AACA;AACA,eAAe,SAASC,IAAIA,CAAAC,IAAA,EAA8C;EAAA,IAA7C;IAAEC,KAAK;IAAEC;EAAmB,CAAC,GAAAF,IAAA;EACxD,MAAMG,SAAS,GAAG;IAAEF;EAAM,CAAC;EAC3B,MAAMG,KAAmB,GAAGb,QAAQ,CAAC,CAAC;EAEtC,IAAIc,UAAU;EACd,IAAI;IACFA,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACL,OAAO,CAACM,IAAI,CAAC;EACvC,CAAC,CAAC,OAAOC,CAAC,EAAE;IACV,MAAMC,KAAK,GAAGd,WAAW,CAACa,CAAC,CAAC;IAC5B,IAAI;MACFJ,UAAU,GAAGb,KAAK,CAACe,KAAK,CAACL,OAAO,CAACM,IAAI,CAAC;IACxC,CAAC,CAAC,OAAOG,UAAU,EAAE;MACnB;MACA;MACA,MAAMC,GAAG,GAAGC,QAAQ,CAACH,KAAK,CAACI,OAAO,CAACC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC;MAC9DL,KAAK,CAACI,OAAO,SAAAE,MAAA,CAASd,OAAO,CAACM,IAAI,CAACS,SAAS,CAAC,CAAC,EAAEL,GAAG,GAAG,CAAC,CAAC,iBAAS;MACjE,oBAAOd,IAAA,CAACJ,YAAY;QAACwB,IAAI,EAAE,kBAAmB;QAACJ,OAAO,EAAEJ,KAAK,CAACI;MAAQ,CAAE,CAAC;IAC3E;EACF;;EAEA;EACA;EACA,MAAMK,SAAS,GAAGxB,uBAAuB,CAACS,KAAK,CAAC,GAAG,aAAa,GAAG,SAAS;EAE5E,oBACEN,IAAA;IAAK,eAAY,QAAQ;IAACsB,KAAK,EAAEjB,SAAU;IAAAkB,QAAA,eACzCvB,IAAA,CAACL,SAAS;MACR6B,GAAG,EAAEjB,UAAW;MAChBkB,SAAS,EAAE,CAACrB,OAAO,CAACsB,QAAS;MAC7BC,gBAAgB,EAAE,KAAM;MACxBC,iBAAiB,EAAE,KAAM;MACzBR,IAAI,EAAE,KAAM;MACZd,KAAK,EAAEe,SAAU;MACjBC,KAAK,EAAE;QACLO,UAAU,EAAEvB,KAAK,CAACwB,YAAY,CAACC,QAAQ;QACvCC,QAAQ,EAAE1B,KAAK,CAAC2B,SAAS,CAACC,EAAE;QAC5BC,eAAe,EAAE7B,KAAK,CAAC8B,MAAM,CAACC,OAAO;QACrCC,UAAU,EAAE,UAAU,CAAE;MAC1B;IAAE,CACH;EAAC,CACC,CAAC;AAEV"}