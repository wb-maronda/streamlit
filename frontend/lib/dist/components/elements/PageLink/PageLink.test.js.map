{"version":3,"file":"PageLink.test.js","names":["React","fireEvent","screen","customRenderLibContext","render","IsSidebarContext","PageLink","PageLinkProto","jsx","_jsx","getProps","elementProps","arguments","length","undefined","widgetProps","element","create","label","page","pageScriptHash","useContainerWidth","width","disabled","mockOnPageChange","jest","fn","describe","beforeEach","mockClear","it","props","pageLink","getByRole","expect","toBeInTheDocument","getByTestId","toHaveClass","toHaveStyle","name","toHaveAttribute","pageNavLink","Provider","value","children","onPageChange","click","toHaveBeenCalledWith","not","toHaveBeenCalled","external"],"sources":["../../../../src/components/elements/PageLink/PageLink.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport { fireEvent, screen } from \"@testing-library/react\"\n\nimport \"@testing-library/jest-dom\"\nimport { customRenderLibContext, render } from \"@streamlit/lib/src/test_util\"\nimport IsSidebarContext from \"@streamlit/lib/src/components/core/IsSidebarContext\"\nimport { PageLink as PageLinkProto } from \"@streamlit/lib/src/proto\"\n\nimport PageLink, { Props } from \"./PageLink\"\n\nconst getProps = (\n  elementProps: Partial<PageLinkProto> = {},\n  widgetProps: Partial<Props> = {}\n): Props => ({\n  element: PageLinkProto.create({\n    label: \"Label\",\n    page: \"streamlit_app\",\n    pageScriptHash: \"main_page_hash\",\n    useContainerWidth: null,\n    ...elementProps,\n  }),\n  width: 250,\n  disabled: false,\n  ...widgetProps,\n})\n\nconst mockOnPageChange = jest.fn()\n\ndescribe(\"PageLink\", () => {\n  beforeEach(() => {\n    mockOnPageChange.mockClear()\n  })\n\n  it(\"renders without crashing\", () => {\n    const props = getProps()\n    render(<PageLink {...props} />)\n\n    const pageLink = screen.getByRole(\"link\")\n    expect(pageLink).toBeInTheDocument()\n  })\n\n  it(\"has correct className and style\", () => {\n    const props = getProps()\n    render(<PageLink {...props} />)\n\n    const pageLink = screen.getByTestId(\"stPageLink\")\n\n    expect(pageLink).toHaveClass(\"stPageLink\")\n    expect(pageLink).toHaveStyle(`width: ${props.width}px`)\n  })\n\n  it(\"renders a label within the button\", () => {\n    const props = getProps()\n    render(<PageLink {...props} />)\n\n    const pageLink = screen.getByRole(\"link\", {\n      name: `${props.element.label}`,\n    })\n\n    expect(pageLink).toBeInTheDocument()\n  })\n\n  it(\"handles the disabled prop\", () => {\n    const props = getProps({}, { disabled: true })\n    render(<PageLink {...props} />)\n\n    const pageLink = screen.getByRole(\"link\")\n    expect(pageLink).toHaveAttribute(\"disabled\")\n  })\n\n  it(\"follows useContainerWidth property if set to true\", () => {\n    const props = getProps({ useContainerWidth: true })\n    render(<PageLink {...props} />)\n    const pageNavLink = screen.getByTestId(\"stPageLink-NavLink\")\n    expect(pageNavLink).toHaveStyle(\"width: 250px\")\n  })\n\n  it(\"follows useContainerWidth property if set to false\", () => {\n    const props = getProps({ useContainerWidth: false })\n    render(<PageLink {...props} />)\n    const pageNavLink = screen.getByTestId(\"stPageLink-NavLink\")\n    expect(pageNavLink).toHaveStyle(\"width: fit-content\")\n  })\n\n  it(\"useContainerWidth true by default in the sidebar\", () => {\n    const props = getProps()\n    render(\n      <IsSidebarContext.Provider value={true}>\n        <PageLink {...props} />\n      </IsSidebarContext.Provider>\n    )\n    const pageNavLink = screen.getByTestId(\"stPageLink-NavLink\")\n    expect(pageNavLink).toHaveStyle(\"width: 250px\")\n  })\n\n  it(\"useContainerWidth false by default in the main page\", () => {\n    const props = getProps()\n    render(\n      <IsSidebarContext.Provider value={false}>\n        <PageLink {...props} />\n      </IsSidebarContext.Provider>\n    )\n    const pageNavLink = screen.getByTestId(\"stPageLink-NavLink\")\n    expect(pageNavLink).toHaveStyle(\"width: fit-content\")\n  })\n\n  it(\"triggers onPageChange with pageScriptHash when clicked\", () => {\n    const props = getProps()\n\n    customRenderLibContext(<PageLink {...props} />, {\n      onPageChange: mockOnPageChange,\n    })\n\n    const pageNavLink = screen.getByTestId(\"stPageLink-NavLink\")\n    fireEvent.click(pageNavLink)\n    expect(mockOnPageChange).toHaveBeenCalledWith(\"main_page_hash\")\n  })\n\n  it(\"does not trigger onPageChange when disabled\", () => {\n    const props = getProps({}, { disabled: true })\n\n    customRenderLibContext(<PageLink {...props} />, {\n      onPageChange: mockOnPageChange,\n    })\n\n    const pageNavLink = screen.getByTestId(\"stPageLink-NavLink\")\n    fireEvent.click(pageNavLink)\n    expect(mockOnPageChange).not.toHaveBeenCalled()\n  })\n\n  it(\"does not trigger onPageChange for external links\", () => {\n    const props = getProps({ page: \"http://example.com\", external: true })\n\n    customRenderLibContext(<PageLink {...props} />, {\n      onPageChange: mockOnPageChange,\n    })\n\n    const pageNavLink = screen.getByTestId(\"stPageLink-NavLink\")\n    fireEvent.click(pageNavLink)\n    expect(mockOnPageChange).not.toHaveBeenCalled()\n  })\n})\n"],"mappings":"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"}