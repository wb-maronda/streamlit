{"version":3,"file":"BokehChart.test.js","names":["React","screen","render","BokehChart","BokehChartProto","Bokeh","jsx","_jsx","jest","mock","__esModule","default","register_plugin","fn","embed","embed_item","require","mockBokehEmbed","mocked","MOCK_FIGURE","target_id","root_id","doc","roots","references","attributes","id","type","data_source","glyph","hover_glyph","muted_glyph","nonselection_glyph","selection_glyph","view","callback","line_alpha","line_color","line_width","x","field","y","axis_label","formatter","ticker","data","selected","selection_policy","items","active_drag","active_inspect","active_multi","active_scroll","active_tap","tools","dimension","below","center","left","renderers","title","toolbar","x_range","x_scale","y_range","y_scale","subtype","text","source","overlay","label","value","bottom_units","fill_alpha","fill_color","left_units","level","line_dash","render_mode","right_units","top_units","root_ids","version","getProps","elementProps","arguments","length","undefined","element","create","figure","JSON","stringify","useContainerWidth","elementId","height","width","expect","extend","toMatchBokehDimensions","plot","find","e","message","pass","plot_width","plot_height","describe","div","beforeEach","document","createElement","body","appendChild","afterEach","mockClear","removeChild","it","props","bokehElement","getByTestId","toBeInTheDocument","toHaveClass","toHaveBeenCalledWith","rerender","toHaveBeenCalledTimes"],"sources":["../../../../src/components/elements/BokehChart/BokehChart.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport \"@testing-library/jest-dom\"\nimport { screen } from \"@testing-library/react\"\n\nimport { render } from \"@streamlit/lib/src/test_util\"\nimport { BokehChart as BokehChartProto } from \"@streamlit/lib/src/proto\"\nimport Bokeh from \"@streamlit/lib/src/vendor/bokeh/bokeh.esm\"\n\nimport { BokehChartProps } from \"./BokehChart\"\n\njest.mock(\"@streamlit/lib/src/vendor/bokeh/bokeh.esm\", () => ({\n  // needed to parse correctly\n  __esModule: true,\n  default: {\n    // the js source code has main.register_plugin so we need to mock it\n    register_plugin: jest.fn(),\n    // actual function that we need to mock and check\n    embed: {\n      embed_item: jest.fn(),\n    },\n  },\n}))\n\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst { BokehChart } = require(\"./BokehChart\")\n\nconst mockBokehEmbed = jest.mocked(Bokeh)\n\n// Serialized BokehChart data for testing purposes\nconst MOCK_FIGURE = {\n  target_id: null,\n  root_id: \"1088\",\n  doc: {\n    roots: {\n      references: [\n        {\n          attributes: {},\n          id: \"1113\",\n          type: \"ResetTool\",\n        },\n        {\n          attributes: {\n            data_source: { id: \"1122\", type: \"ColumnDataSource\" },\n            glyph: { id: \"1123\", type: \"Line\" },\n            hover_glyph: null,\n            muted_glyph: null,\n            nonselection_glyph: { id: \"1124\", type: \"Line\" },\n            selection_glyph: null,\n            view: { id: \"1126\", type: \"CDSView\" },\n          },\n          id: \"1125\",\n          type: \"GlyphRenderer\",\n        },\n        { attributes: {}, id: \"1114\", type: \"HelpTool\" },\n        {\n          attributes: { callback: null },\n          id: \"1091\",\n          type: \"DataRange1d\",\n        },\n        {\n          attributes: {\n            line_alpha: 0.1,\n            line_color: \"#1f77b4\",\n            line_width: 2,\n            x: { field: \"x\" },\n            y: { field: \"y\" },\n          },\n          id: \"1124\",\n          type: \"Line\",\n        },\n        { attributes: {}, id: \"1097\", type: \"LinearScale\" },\n        {\n          attributes: {\n            axis_label: \"x\",\n            formatter: { id: \"1131\", type: \"BasicTickFormatter\" },\n            ticker: { id: \"1100\", type: \"BasicTicker\" },\n          },\n          id: \"1099\",\n          type: \"LinearAxis\",\n        },\n        {\n          attributes: {\n            callback: null,\n            data: { x: [1, 2, 3, 4, 5], y: [6, 7, 2, 4, 5] },\n            selected: { id: \"1140\", type: \"Selection\" },\n            selection_policy: { id: \"1141\", type: \"UnionRenderers\" },\n          },\n          id: \"1122\",\n          type: \"ColumnDataSource\",\n        },\n        {\n          attributes: { items: [{ id: \"1134\", type: \"LegendItem\" }] },\n          id: \"1133\",\n          type: \"Legend\",\n        },\n        {\n          attributes: {\n            active_drag: \"auto\",\n            active_inspect: \"auto\",\n            active_multi: null,\n            active_scroll: \"auto\",\n            active_tap: \"auto\",\n            tools: [\n              { id: \"1109\", type: \"PanTool\" },\n              { id: \"1110\", type: \"WheelZoomTool\" },\n              {\n                id: \"1111\",\n                type: \"BoxZoomTool\",\n              },\n              { id: \"1112\", type: \"SaveTool\" },\n              { id: \"1113\", type: \"ResetTool\" },\n              {\n                id: \"1114\",\n                type: \"HelpTool\",\n              },\n            ],\n          },\n          id: \"1115\",\n          type: \"Toolbar\",\n        },\n        {\n          attributes: {\n            dimension: 1,\n            ticker: { id: \"1105\", type: \"BasicTicker\" },\n          },\n          id: \"1108\",\n          type: \"Grid\",\n        },\n        {\n          attributes: {},\n          id: \"1131\",\n          type: \"BasicTickFormatter\",\n        },\n        {\n          attributes: {\n            below: [{ id: \"1099\", type: \"LinearAxis\" }],\n            center: [\n              { id: \"1103\", type: \"Grid\" },\n              { id: \"1108\", type: \"Grid\" },\n              {\n                id: \"1133\",\n                type: \"Legend\",\n              },\n            ],\n            left: [{ id: \"1104\", type: \"LinearAxis\" }],\n            renderers: [{ id: \"1125\", type: \"GlyphRenderer\" }],\n            title: { id: \"1089\", type: \"Title\" },\n            toolbar: { id: \"1115\", type: \"Toolbar\" },\n            x_range: { id: \"1091\", type: \"DataRange1d\" },\n            x_scale: { id: \"1095\", type: \"LinearScale\" },\n            y_range: { id: \"1093\", type: \"DataRange1d\" },\n            y_scale: { id: \"1097\", type: \"LinearScale\" },\n          },\n          id: \"1088\",\n          subtype: \"Figure\",\n          type: \"Plot\",\n        },\n        { attributes: {}, id: \"1109\", type: \"PanTool\" },\n        {\n          attributes: {},\n          id: \"1100\",\n          type: \"BasicTicker\",\n        },\n        {\n          attributes: {},\n          id: \"1129\",\n          type: \"BasicTickFormatter\",\n        },\n        {\n          attributes: {\n            line_color: \"#1f77b4\",\n            line_width: 2,\n            x: { field: \"x\" },\n            y: { field: \"y\" },\n          },\n          id: \"1123\",\n          type: \"Line\",\n        },\n        { attributes: {}, id: \"1140\", type: \"Selection\" },\n        {\n          attributes: { text: \"simple line example\" },\n          id: \"1089\",\n          type: \"Title\",\n        },\n        { attributes: {}, id: \"1110\", type: \"WheelZoomTool\" },\n        {\n          attributes: {\n            ticker: {\n              id: \"1100\",\n              type: \"BasicTicker\",\n            },\n          },\n          id: \"1103\",\n          type: \"Grid\",\n        },\n        {\n          attributes: { source: { id: \"1122\", type: \"ColumnDataSource\" } },\n          id: \"1126\",\n          type: \"CDSView\",\n        },\n        { attributes: {}, id: \"1141\", type: \"UnionRenderers\" },\n        {\n          attributes: {\n            overlay: {\n              id: \"1132\",\n              type: \"BoxAnnotation\",\n            },\n          },\n          id: \"1111\",\n          type: \"BoxZoomTool\",\n        },\n        { attributes: {}, id: \"1112\", type: \"SaveTool\" },\n        {\n          attributes: { callback: null },\n          id: \"1093\",\n          type: \"DataRange1d\",\n        },\n        { attributes: {}, id: \"1105\", type: \"BasicTicker\" },\n        {\n          attributes: {\n            label: { value: \"Trend\" },\n            renderers: [{ id: \"1125\", type: \"GlyphRenderer\" }],\n          },\n          id: \"1134\",\n          type: \"LegendItem\",\n        },\n        { attributes: {}, id: \"1095\", type: \"LinearScale\" },\n        {\n          attributes: {\n            axis_label: \"y\",\n            formatter: { id: \"1129\", type: \"BasicTickFormatter\" },\n            ticker: { id: \"1105\", type: \"BasicTicker\" },\n          },\n          id: \"1104\",\n          type: \"LinearAxis\",\n        },\n        {\n          attributes: {\n            bottom_units: \"screen\",\n            fill_alpha: { value: 0.5 },\n            fill_color: { value: \"lightgrey\" },\n            left_units: \"screen\",\n            level: \"overlay\",\n            line_alpha: { value: 1.0 },\n            line_color: { value: \"black\" },\n            line_dash: [4, 4],\n            line_width: { value: 2 },\n            render_mode: \"css\",\n            right_units: \"screen\",\n            top_units: \"screen\",\n          },\n          id: \"1132\",\n          type: \"BoxAnnotation\",\n        },\n      ],\n      root_ids: [\"1088\"],\n    },\n    title: \"\",\n    version: \"1.4.0\",\n  },\n}\n\nconst getProps = (\n  elementProps: Partial<BokehChartProto> = {}\n): BokehChartProps => ({\n  element: BokehChartProto.create({\n    figure: JSON.stringify(MOCK_FIGURE),\n    useContainerWidth: false,\n    elementId: \"1\",\n    ...elementProps,\n  }),\n  height: 400,\n  width: 400,\n})\n\nexpect.extend({\n  toMatchBokehDimensions(data, width, height) {\n    const plot =\n      data && data.doc && data.doc.roots && data.doc.roots.references\n        ? data.doc.roots.references.find((e: any) => e.type === \"Plot\")\n        : undefined\n\n    if (!plot) {\n      return {\n        message: () => `expected data to contain attributes`,\n        pass: false,\n      }\n    }\n\n    const pass =\n      plot.attributes.plot_width === width &&\n      plot.attributes.plot_height === height\n\n    return {\n      message: () =>\n        `expected ${plot.attributes.plot_width}x${plot.attributes.plot_height} to be ${width}x${height}`,\n      pass,\n    }\n  },\n})\n\ndescribe(\"BokehChart element\", () => {\n  // Avoid Warning: render(): Rendering components directly into document.body is discouraged.\n  let div: HTMLDivElement\n  beforeEach(() => {\n    div = document.createElement(\"div\")\n    document.body.appendChild(div)\n  })\n\n  afterEach(() => {\n    // @ts-expect-error\n    mockBokehEmbed.embed.embed_item.mockClear() // clear so embed item calls don't add up\n    document.body.removeChild(div)\n  })\n\n  it(\"renders without crashing\", () => {\n    const props = getProps()\n    render(<BokehChart {...props} />)\n    const bokehElement = screen.getByTestId(\"stBokehChart\")\n    expect(bokehElement).toBeInTheDocument()\n    expect(bokehElement).toHaveClass(\"stBokehChart\")\n  })\n\n  describe(\"Chart dimensions\", () => {\n    it(\"should use height if not useContainerWidth\", () => {\n      const props = getProps()\n      render(<BokehChart {...props} />)\n      expect(mockBokehEmbed.embed.embed_item).toHaveBeenCalledWith(\n        // @ts-expect-error\n        expect.toMatchBokehDimensions(400, 400),\n        \"bokeh-chart-1\"\n      )\n    })\n\n    it(\"should have width if useContainerWidth\", () => {\n      const props = {\n        ...getProps({\n          useContainerWidth: true,\n        }),\n        height: 0,\n      }\n\n      render(<BokehChart {...props} />)\n\n      expect(mockBokehEmbed.embed.embed_item).toHaveBeenCalledWith(\n        // @ts-expect-error\n        expect.toMatchBokehDimensions(400),\n        \"bokeh-chart-1\"\n      )\n    })\n  })\n\n  it(\"should re-render the chart when the component updates\", () => {\n    const props = getProps()\n    const { rerender } = render(<BokehChart {...props} />)\n    rerender(<BokehChart {...props} width={500} height={500} />)\n    expect(mockBokehEmbed.embed.embed_item).toHaveBeenCalledTimes(2)\n  })\n})\n"],"mappings":"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"}