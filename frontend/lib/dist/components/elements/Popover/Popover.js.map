{"version":3,"file":"Popover.js","names":["React","useTheme","ExpandMore","ExpandLess","hasLightBackgroundColor","StyledIcon","BaseButton","BaseButtonTooltip","BaseButtonKind","BaseButtonSize","StreamlitMarkdown","IsSidebarContext","Popover","UIPopover","TRIGGER_TYPE","PLACEMENT","StyledPopoverButtonIcon","jsx","_jsx","jsxs","_jsxs","_ref","element","empty","width","children","open","setOpen","useState","isInSidebar","useContext","theme","lightBackground","fluidButtonWidth","help","triggerType","click","placement","bottomLeft","content","isOpen","onClickOutside","onClick","undefined","onEsc","ignoreBoundary","renderAll","overrides","Body","props","style","marginRight","spacing","lg","marginBottom","maxHeight","overflow","maxWidth","concat","sizes","contentMaxWidth","minWidth","useContainerWidth","Math","max","breakpoints","sm","borderTopLeftRadius","radii","xl","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","borderLeftWidth","borderWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingRight","twoXL","paddingLeft","paddingBottom","paddingTop","borderLeftStyle","borderRightStyle","borderTopStyle","borderBottomStyle","borderLeftColor","colors","fadedText10","borderRightColor","borderTopColor","borderBottomColor","boxShadow","kind","SECONDARY","size","SMALL","disabled","fluidWidth","source","label","allowHTML","isLabel","largerLabel","disableLinks","as","color","margin","padding"],"sources":["../../../../src/components/elements/Popover/Popover.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport { ExpandMore, ExpandLess } from \"@emotion-icons/material-outlined\"\n\nimport { hasLightBackgroundColor } from \"@streamlit/lib/src/theme\"\nimport { StyledIcon } from \"@streamlit/lib/src/components/shared/Icon\"\nimport { Block as BlockProto } from \"@streamlit/lib/src/proto\"\nimport BaseButton, {\n  BaseButtonTooltip,\n  BaseButtonKind,\n  BaseButtonSize,\n} from \"@streamlit/lib/src/components/shared/BaseButton\"\nimport StreamlitMarkdown from \"@streamlit/lib/src/components/shared/StreamlitMarkdown\"\nimport IsSidebarContext from \"@streamlit/lib/src/components/core/IsSidebarContext\"\n\nimport { Popover as UIPopover, TRIGGER_TYPE, PLACEMENT } from \"baseui/popover\"\n\nimport { StyledPopoverButtonIcon } from \"./styled-components\"\n\nexport interface PopoverProps {\n  element: BlockProto.Popover\n  empty: boolean\n  width: number\n}\n\nconst Popover: React.FC<React.PropsWithChildren<PopoverProps>> = ({\n  element,\n  empty,\n  width,\n  children,\n}): ReactElement => {\n  const [open, setOpen] = React.useState(false)\n  const isInSidebar = React.useContext(IsSidebarContext)\n\n  const theme = useTheme()\n  const lightBackground = hasLightBackgroundColor(theme)\n\n  // When useContainerWidth true & has help tooltip,\n  // we need to pass the container width down to the button\n  const fluidButtonWidth = element.help ? width : true\n\n  return (\n    <div data-testid=\"stPopover\">\n      <UIPopover\n        triggerType={TRIGGER_TYPE.click}\n        placement={PLACEMENT.bottomLeft}\n        content={() => children}\n        isOpen={open}\n        onClickOutside={() => setOpen(false)}\n        // We need to handle the click here as well to allow closing the\n        // popover when the user clicks next to the button in the available\n        // width in the surrounding container.\n        onClick={() => (open ? setOpen(false) : undefined)}\n        onEsc={() => setOpen(false)}\n        ignoreBoundary={isInSidebar}\n        // TODO(lukasmasuch): We currently use renderAll to have a consistent\n        // width during the first and subsequent opens of the popover. Once we ,\n        // support setting an explicit width we should reconsider turning this to\n        // false for a better performance.\n        renderAll={true}\n        overrides={{\n          Body: {\n            props: {\n              \"data-testid\": \"stPopoverBody\",\n            },\n            style: () => ({\n              marginRight: theme.spacing.lg,\n              marginBottom: theme.spacing.lg,\n\n              maxHeight: \"70vh\",\n              overflow: \"auto\",\n              maxWidth: `calc(${theme.sizes.contentMaxWidth} - 2*${theme.spacing.lg})`,\n              minWidth: element.useContainerWidth\n                ? // If use_container_width==True, we use the container width as minimum:\n                  `${Math.max(width, 160)}px` // 10rem ~= 160px\n                : \"20rem\",\n              [`@media (max-width: ${theme.breakpoints.sm})`]: {\n                maxWidth: `calc(100% - 2rem)`,\n              },\n              borderTopLeftRadius: theme.radii.xl,\n              borderTopRightRadius: theme.radii.xl,\n              borderBottomRightRadius: theme.radii.xl,\n              borderBottomLeftRadius: theme.radii.xl,\n\n              borderLeftWidth: theme.sizes.borderWidth,\n              borderRightWidth: theme.sizes.borderWidth,\n              borderTopWidth: theme.sizes.borderWidth,\n              borderBottomWidth: theme.sizes.borderWidth,\n\n              paddingRight: `calc(${theme.spacing.twoXL} - 1px)`, // 1px to account for border.\n              paddingLeft: `calc(${theme.spacing.twoXL} - 1px)`,\n              paddingBottom: `calc(${theme.spacing.twoXL} - 1px)`,\n              paddingTop: `calc(${theme.spacing.twoXL} - 1px)`,\n\n              borderLeftStyle: \"solid\",\n              borderRightStyle: \"solid\",\n              borderTopStyle: \"solid\",\n              borderBottomStyle: \"solid\",\n\n              borderLeftColor: theme.colors.fadedText10,\n              borderRightColor: theme.colors.fadedText10,\n              borderTopColor: theme.colors.fadedText10,\n              borderBottomColor: theme.colors.fadedText10,\n\n              boxShadow: lightBackground\n                ? \"0px 4px 16px rgba(0, 0, 0, 0.16)\"\n                : \"0px 4px 16px rgba(0, 0, 0, 0.7)\",\n            }),\n          },\n        }}\n      >\n        {/* This needs to be wrapped into a div, otherwise\n        the BaseWeb popover implementation will not work correctly. */}\n        <div>\n          <BaseButtonTooltip help={element.help}>\n            <BaseButton\n              kind={BaseButtonKind.SECONDARY}\n              size={BaseButtonSize.SMALL}\n              disabled={empty || element.disabled}\n              fluidWidth={element.useContainerWidth ? fluidButtonWidth : false}\n              data-testid=\"stPopoverButton\"\n              onClick={() => setOpen(!open)}\n            >\n              <StreamlitMarkdown\n                source={element.label}\n                allowHTML={false}\n                isLabel\n                largerLabel\n                disableLinks\n              />\n              <StyledPopoverButtonIcon>\n                <StyledIcon\n                  as={open ? ExpandLess : ExpandMore}\n                  color=\"inherit\"\n                  aria-hidden=\"true\"\n                  size=\"lg\"\n                  margin=\"\"\n                  padding=\"\"\n                />\n              </StyledPopoverButtonIcon>\n            </BaseButton>\n          </BaseButtonTooltip>\n        </div>\n      </UIPopover>\n    </div>\n  )\n}\n\nexport default Popover\n"],"mappings":"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"}