{"version":3,"file":"Popover.js","names":["React","useTheme","ExpandLess","ExpandMore","PLACEMENT","TRIGGER_TYPE","Popover","UIPopover","hasLightBackgroundColor","StyledIcon","BaseButton","BaseButtonKind","BaseButtonSize","BaseButtonTooltip","DynamicButtonLabel","IsSidebarContext","StyledPopoverButtonIcon","jsx","_jsx","jsxs","_jsxs","_ref","element","empty","width","children","open","setOpen","useState","isInSidebar","useContext","theme","lightBackground","fluidButtonWidth","help","className","triggerType","click","placement","bottomLeft","content","isOpen","onClickOutside","onClick","undefined","onEsc","ignoreBoundary","renderAll","overrides","Body","props","style","marginRight","spacing","lg","marginBottom","maxHeight","overflow","maxWidth","sizes","contentMaxWidth","minWidth","useContainerWidth","Math","max","breakpoints","sm","borderTopLeftRadius","radii","xl","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","borderLeftWidth","borderWidth","borderRightWidth","borderTopWidth","borderBottomWidth","paddingRight","twoXL","paddingLeft","paddingBottom","paddingTop","borderLeftStyle","borderRightStyle","borderTopStyle","borderBottomStyle","borderLeftColor","colors","borderColor","borderRightColor","borderTopColor","borderBottomColor","boxShadow","kind","SECONDARY","size","SMALL","disabled","fluidWidth","icon","label","as","color","margin","padding"],"sources":["../../../../src/components/elements/Popover/Popover.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport { ExpandLess, ExpandMore } from \"@emotion-icons/material-outlined\"\nimport { PLACEMENT, TRIGGER_TYPE, Popover as UIPopover } from \"baseui/popover\"\n\nimport { hasLightBackgroundColor } from \"@streamlit/lib/src/theme\"\nimport { StyledIcon } from \"@streamlit/lib/src/components/shared/Icon\"\nimport { Block as BlockProto } from \"@streamlit/lib/src/proto\"\nimport BaseButton, {\n  BaseButtonKind,\n  BaseButtonSize,\n  BaseButtonTooltip,\n  DynamicButtonLabel,\n} from \"@streamlit/lib/src/components/shared/BaseButton\"\nimport IsSidebarContext from \"@streamlit/lib/src/components/core/IsSidebarContext\"\n\nimport { StyledPopoverButtonIcon } from \"./styled-components\"\n\nexport interface PopoverProps {\n  element: BlockProto.Popover\n  empty: boolean\n  width: number\n}\n\nconst Popover: React.FC<React.PropsWithChildren<PopoverProps>> = ({\n  element,\n  empty,\n  width,\n  children,\n}): ReactElement => {\n  const [open, setOpen] = React.useState(false)\n  const isInSidebar = React.useContext(IsSidebarContext)\n\n  const theme = useTheme()\n  const lightBackground = hasLightBackgroundColor(theme)\n\n  // When useContainerWidth true & has help tooltip,\n  // we need to pass the container width down to the button\n  const fluidButtonWidth = element.help ? width : true\n\n  return (\n    <div data-testid=\"stPopover\" className=\"stPopover\">\n      <UIPopover\n        triggerType={TRIGGER_TYPE.click}\n        placement={PLACEMENT.bottomLeft}\n        content={() => children}\n        isOpen={open}\n        onClickOutside={() => setOpen(false)}\n        // We need to handle the click here as well to allow closing the\n        // popover when the user clicks next to the button in the available\n        // width in the surrounding container.\n        onClick={() => (open ? setOpen(false) : undefined)}\n        onEsc={() => setOpen(false)}\n        ignoreBoundary={isInSidebar}\n        // TODO(lukasmasuch): We currently use renderAll to have a consistent\n        // width during the first and subsequent opens of the popover. Once we ,\n        // support setting an explicit width we should reconsider turning this to\n        // false for a better performance.\n        renderAll={true}\n        overrides={{\n          Body: {\n            props: {\n              \"data-testid\": \"stPopoverBody\",\n            },\n            style: () => ({\n              marginRight: theme.spacing.lg,\n              marginBottom: theme.spacing.lg,\n\n              maxHeight: \"70vh\",\n              overflow: \"auto\",\n              maxWidth: `calc(${theme.sizes.contentMaxWidth} - 2*${theme.spacing.lg})`,\n              minWidth: element.useContainerWidth\n                ? // If use_container_width==True, we use the container width as minimum:\n                  `${Math.max(width, 160)}px` // 10rem ~= 160px\n                : \"20rem\",\n              [`@media (max-width: ${theme.breakpoints.sm})`]: {\n                maxWidth: `calc(100% - 2rem)`,\n              },\n              borderTopLeftRadius: theme.radii.xl,\n              borderTopRightRadius: theme.radii.xl,\n              borderBottomRightRadius: theme.radii.xl,\n              borderBottomLeftRadius: theme.radii.xl,\n\n              borderLeftWidth: theme.sizes.borderWidth,\n              borderRightWidth: theme.sizes.borderWidth,\n              borderTopWidth: theme.sizes.borderWidth,\n              borderBottomWidth: theme.sizes.borderWidth,\n\n              paddingRight: `calc(${theme.spacing.twoXL} - ${theme.sizes.borderWidth})`, // 1px to account for border.\n              paddingLeft: `calc(${theme.spacing.twoXL} - ${theme.sizes.borderWidth})`,\n              paddingBottom: `calc(${theme.spacing.twoXL} - ${theme.sizes.borderWidth})`,\n              paddingTop: `calc(${theme.spacing.twoXL} - ${theme.sizes.borderWidth})`,\n\n              borderLeftStyle: \"solid\",\n              borderRightStyle: \"solid\",\n              borderTopStyle: \"solid\",\n              borderBottomStyle: \"solid\",\n\n              borderLeftColor: theme.colors.borderColor,\n              borderRightColor: theme.colors.borderColor,\n              borderTopColor: theme.colors.borderColor,\n              borderBottomColor: theme.colors.borderColor,\n\n              boxShadow: lightBackground\n                ? \"0px 4px 16px rgba(0, 0, 0, 0.16)\"\n                : \"0px 4px 16px rgba(0, 0, 0, 0.7)\",\n            }),\n          },\n        }}\n      >\n        {/* This needs to be wrapped into a div, otherwise\n        the BaseWeb popover implementation will not work correctly. */}\n        <div>\n          <BaseButtonTooltip help={element.help}>\n            <BaseButton\n              data-testid=\"stPopoverButton\"\n              kind={BaseButtonKind.SECONDARY}\n              size={BaseButtonSize.SMALL}\n              disabled={empty || element.disabled}\n              fluidWidth={element.useContainerWidth ? fluidButtonWidth : false}\n              onClick={() => setOpen(!open)}\n            >\n              <DynamicButtonLabel icon={element.icon} label={element.label} />\n              <StyledPopoverButtonIcon>\n                <StyledIcon\n                  as={open ? ExpandLess : ExpandMore}\n                  color=\"inherit\"\n                  aria-hidden=\"true\"\n                  size=\"lg\"\n                  margin=\"\"\n                  padding=\"\"\n                />\n              </StyledPopoverButtonIcon>\n            </BaseButton>\n          </BaseButtonTooltip>\n        </div>\n      </UIPopover>\n    </div>\n  )\n}\n\nexport default Popover\n"],"mappings":"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"}