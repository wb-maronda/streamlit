{"version":3,"file":"Dialog.js","names":["React","useEffect","useMemo","useState","useTheme","SIZE","Modal","ModalHeader","ModalBody","Block","BlockProto","IsDialogContext","notNullOrUndefined","StyledDialogContent","jsx","_jsx","jsxs","_jsxs","parseWidthConfig","width","theme","Dialog","DialogWidth","LARGE","paddingDifferenceDialogAndAppView","spacing","lg","concat","sizes","contentMaxWidth","default","_ref","element","children","title","dismissible","isOpen","initialIsOpen","setIsOpen","size","SMALL","closeable","onClose","DialogWithProvider","props","Provider","value"],"sources":["../../../../src/components/elements/Dialog/Dialog.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement, useEffect, useMemo, useState } from \"react\"\nimport { useTheme } from \"@emotion/react\"\nimport { SIZE } from \"baseui/modal\"\n\nimport { EmotionTheme } from \"@streamlit/lib/src/theme\"\nimport Modal, {\n  ModalHeader,\n  ModalBody,\n} from \"@streamlit/lib/src/components/shared/Modal\"\nimport { Block as BlockProto } from \"@streamlit/lib/src/proto\"\nimport IsDialogContext from \"@streamlit/lib/src/components/core/IsDialogContext\"\nimport { notNullOrUndefined } from \"@streamlit/lib/src/util/utils\"\n\nimport { StyledDialogContent } from \"./styled-components\"\n\nexport interface Props {\n  element: BlockProto.Dialog\n}\n\nfunction parseWidthConfig(\n  width: BlockProto.Dialog.DialogWidth,\n  theme: EmotionTheme\n): string {\n  if (width === BlockProto.Dialog.DialogWidth.LARGE) {\n    // This is the same width incl. padding as the AppView container is using 704px (736px (= contentMaxWidth) - 32px padding).\n    // The dialog's total left and right padding is 48px. So the dialog needs a total width of 752px (=704px + 48px).\n    // The used calculation here makes the relation to the app content width more comprehendable than hardcoding.\n    // Note that a Modal has max-width:100%, so it looks good on mobile independent of the calculated size here.\n    const paddingDifferenceDialogAndAppView = theme.spacing.lg // the dialog has 0.5rem more padding left and right => 1rem\n    return `calc(${theme.sizes.contentMaxWidth} + ${paddingDifferenceDialogAndAppView})`\n  }\n\n  return SIZE.default\n}\n\nconst Dialog: React.FC<React.PropsWithChildren<Props>> = ({\n  element,\n  children,\n}): ReactElement => {\n  const { title, dismissible, width, isOpen: initialIsOpen } = element\n  const [isOpen, setIsOpen] = useState<boolean>(false)\n\n  useEffect(() => {\n    // Only apply the open state if it was actually set in the proto.\n    if (notNullOrUndefined(initialIsOpen)) {\n      setIsOpen(initialIsOpen)\n    }\n  }, [initialIsOpen])\n\n  const theme = useTheme()\n  const size: string = useMemo(\n    () =>\n      parseWidthConfig(width ?? BlockProto.Dialog.DialogWidth.SMALL, theme),\n    [width, theme]\n  )\n\n  return (\n    <Modal\n      isOpen={isOpen}\n      closeable={dismissible}\n      onClose={() => setIsOpen(false)}\n      size={size}\n    >\n      <ModalHeader>{title}</ModalHeader>\n      <ModalBody>\n        <StyledDialogContent>{children}</StyledDialogContent>\n      </ModalBody>\n    </Modal>\n  )\n}\n\nfunction DialogWithProvider(\n  props: React.PropsWithChildren<Props>\n): ReactElement {\n  return (\n    <IsDialogContext.Provider value={true}>\n      <Dialog {...props} />\n    </IsDialogContext.Provider>\n  )\n}\n\nexport default DialogWithProvider\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,IAAkBC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AACzE,SAASC,QAAQ,QAAQ,gBAAgB;AACzC,SAASC,IAAI,QAAQ,cAAc;AAGnC,OAAOC,KAAK,IACVC,WAAW,EACXC,SAAS;AAEX,SAASC,KAAK,IAAIC,UAAU;AAC5B,OAAOC,eAAe;AACtB,SAASC,kBAAkB;AAE3B,SAASC,mBAAmB;AAA6B,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AAMzD,SAASC,gBAAgBA,CACvBC,KAAoC,EACpCC,KAAmB,EACX;EACR,IAAID,KAAK,KAAKT,UAAU,CAACW,MAAM,CAACC,WAAW,CAACC,KAAK,EAAE;IACjD;IACA;IACA;IACA;IACA,MAAMC,iCAAiC,GAAGJ,KAAK,CAACK,OAAO,CAACC,EAAE,EAAC;IAC3D,eAAAC,MAAA,CAAeP,KAAK,CAACQ,KAAK,CAACC,eAAe,SAAAF,MAAA,CAAMH,iCAAiC;EACnF;EAEA,OAAOnB,IAAI,CAACyB,OAAO;AACrB;AAEA,MAAMT,MAAgD,GAAGU,IAAA,IAGrC;EAAA,IAHsC;IACxDC,OAAO;IACPC;EACF,CAAC,GAAAF,IAAA;EACC,MAAM;IAAEG,KAAK;IAAEC,WAAW;IAAEhB,KAAK;IAAEiB,MAAM,EAAEC;EAAc,CAAC,GAAGL,OAAO;EACpE,MAAM,CAACI,MAAM,EAAEE,SAAS,CAAC,GAAGnC,QAAQ,CAAU,KAAK,CAAC;EAEpDF,SAAS,CAAC,MAAM;IACd;IACA,IAAIW,kBAAkB,CAACyB,aAAa,CAAC,EAAE;MACrCC,SAAS,CAACD,aAAa,CAAC;IAC1B;EACF,CAAC,EAAE,CAACA,aAAa,CAAC,CAAC;EAEnB,MAAMjB,KAAK,GAAGhB,QAAQ,CAAC,CAAC;EACxB,MAAMmC,IAAY,GAAGrC,OAAO,CAC1B,MACEgB,gBAAgB,CAACC,KAAK,aAALA,KAAK,cAALA,KAAK,GAAIT,UAAU,CAACW,MAAM,CAACC,WAAW,CAACkB,KAAK,EAAEpB,KAAK,CAAC,EACvE,CAACD,KAAK,EAAEC,KAAK,CACf,CAAC;EAED,oBACEH,KAAA,CAACX,KAAK;IACJ8B,MAAM,EAAEA,MAAO;IACfK,SAAS,EAAEN,WAAY;IACvBO,OAAO,EAAEA,CAAA,KAAMJ,SAAS,CAAC,KAAK,CAAE;IAChCC,IAAI,EAAEA,IAAK;IAAAN,QAAA,gBAEXlB,IAAA,CAACR,WAAW;MAAA0B,QAAA,EAAEC;IAAK,CAAc,CAAC,eAClCnB,IAAA,CAACP,SAAS;MAAAyB,QAAA,eACRlB,IAAA,CAACF,mBAAmB;QAAAoB,QAAA,EAAEA;MAAQ,CAAsB;IAAC,CAC5C,CAAC;EAAA,CACP,CAAC;AAEZ,CAAC;AAED,SAASU,kBAAkBA,CACzBC,KAAqC,EACvB;EACd,oBACE7B,IAAA,CAACJ,eAAe,CAACkC,QAAQ;IAACC,KAAK,EAAE,IAAK;IAAAb,QAAA,eACpClB,IAAA,CAACM,MAAM;MAAA,GAAKuB;IAAK,CAAG;EAAC,CACG,CAAC;AAE/B;AAEA,eAAeD,kBAAkB"}