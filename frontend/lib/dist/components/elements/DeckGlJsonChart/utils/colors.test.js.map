{"version":3,"file":"colors.test.js","names":["getContextualFillColor","describe","object","count","selectedColor","unselectedColor","testCases","isSelected","objectInfo","index","originalFillFunction","color","it","each","description","args","expected","expect","toEqual"],"sources":["../../../../../src/components/elements/DeckGlJsonChart/utils/colors.test.ts"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getContextualFillColor, SerializedColorArray } from \"./colors\"\n\ndescribe(\"#getContextualFillColor\", () => {\n  const object = { count: 10 }\n  const selectedColor: SerializedColorArray = [255, 75, 75]\n  const unselectedColor: SerializedColorArray = [25, 25, 25]\n\n  const testCases: [\n    string,\n    Parameters<typeof getContextualFillColor>[0],\n    ReturnType<typeof getContextualFillColor>\n  ][] = [\n    [\n      \"should return the original fill color when not selected\",\n      {\n        isSelected: false,\n        object,\n        objectInfo: { index: 0 },\n        originalFillFunction: () => [0, 0, 0, 255],\n        selectedColor,\n        unselectedColor,\n      },\n      [0, 0, 0, 102],\n    ],\n    [\n      \"should return the original fill color with lower opacity when not selected\",\n      {\n        isSelected: false,\n        object,\n        objectInfo: { index: 0 },\n        originalFillFunction: () => [0, 0, 0, 255],\n        selectedColor,\n        unselectedColor,\n      },\n      [0, 0, 0, 102],\n    ],\n    [\n      \"should return the original fill color with its original lower opacity when not selected\",\n      {\n        isSelected: false,\n        object,\n        objectInfo: { index: 0 },\n        originalFillFunction: () => [0, 0, 0, 40],\n        selectedColor,\n        unselectedColor,\n      },\n      [0, 0, 0, 40],\n    ],\n    // @see https://deck.gl/docs/api-reference/json/conversion-reference#functions-and-using-the--prefix\n    [\n      \"should return the evaluated original fill color with lower opacity when not selected\",\n      {\n        isSelected: false,\n        object,\n        objectInfo: { index: 0 },\n        originalFillFunction: () => \"@@=[255, 255, count > 50 ? 255 : 0]\",\n        selectedColor,\n        unselectedColor,\n      },\n      [255, 255, 0, 102],\n    ],\n    [\n      \"should return the evaluated original fill color with lower opacity when not selected\",\n      {\n        isSelected: false,\n        object: { count: 200 },\n        objectInfo: { index: 0 },\n        originalFillFunction: () => \"@@=[255, 255, count > 50 ? 255 : 0]\",\n        selectedColor,\n        unselectedColor,\n      },\n      [255, 255, 255, 102],\n    ],\n    [\n      \"should return the evaluated original fill color with lower opacity when not selected\",\n      {\n        isSelected: false,\n        object,\n        objectInfo: { index: 0 },\n        originalFillFunction: () =>\n          \"@@=count > 10 ? [255, 0, 0] : [0, 255, 200]\",\n        selectedColor,\n        unselectedColor,\n      },\n      [0, 255, 200, 102],\n    ],\n    [\n      \"should return the evaluated original fill color with lower opacity when not selected\",\n      {\n        isSelected: false,\n        object: { color: [124, 54, 66] },\n        objectInfo: { index: 0 },\n        originalFillFunction: () => \"@@=color\",\n        selectedColor,\n        unselectedColor,\n      },\n      [124, 54, 66, 102],\n    ],\n    [\n      \"should return the evaluated original fill color with its existing lower opacity when not selected\",\n      {\n        isSelected: false,\n        object: { color: [124, 54, 66, 40] },\n        objectInfo: { index: 0 },\n        originalFillFunction: () => \"@@=color\",\n        selectedColor,\n        unselectedColor,\n      },\n      [124, 54, 66, 40],\n    ],\n    [\n      \"should return the original shorthand fill color with lower opacity when not selected\",\n      {\n        isSelected: false,\n        object,\n        objectInfo: { index: 0 },\n        originalFillFunction: () => [255],\n        selectedColor,\n        unselectedColor,\n      },\n      [255, 0, 0, 102],\n    ],\n    [\n      \"should return the original color when selected\",\n      {\n        isSelected: true,\n        object,\n        objectInfo: { index: 0 },\n        originalFillFunction: () => [0, 0, 0, 255],\n        selectedColor,\n        unselectedColor,\n      },\n      [0, 0, 0, 255],\n    ],\n    [\n      \"should return the original color with higher opacity when selected\",\n      {\n        isSelected: true,\n        object,\n        objectInfo: { index: 0 },\n        originalFillFunction: () => [0, 0, 0, 40],\n        selectedColor,\n        unselectedColor,\n      },\n      [0, 0, 0, 255],\n    ],\n  ]\n\n  it.each(testCases)(\"%s\", (description, args, expected) => {\n    expect(getContextualFillColor(args)).toEqual(expected)\n  })\n})\n"],"mappings":"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"}