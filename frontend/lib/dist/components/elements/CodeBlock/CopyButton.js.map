{"version":3,"file":"CopyButton.js","names":["React","useEffect","useRef","Clipboard","Copy","CopyIcon","StyledCopyButton","jsx","_jsx","CopyButton","_ref","text","buttonRef","clipboardRef","node","current","container","parentElement","undefined","destroy","title","ref","style","top","right","children","size"],"sources":["../../../../src/components/elements/CodeBlock/CopyButton.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useRef } from \"react\"\n\nimport Clipboard from \"clipboard\"\nimport { Copy as CopyIcon } from \"react-feather\"\n\nimport { StyledCopyButton } from \"./styled-components\"\n\ninterface Props {\n  text: string\n}\n\nconst CopyButton: React.FC<Props> = ({ text }) => {\n  const buttonRef = useRef<HTMLButtonElement>(null)\n  const clipboardRef = useRef<Clipboard | null>(null)\n\n  useEffect(() => {\n    const node = buttonRef.current\n\n    if (node !== null) {\n      clipboardRef.current = new Clipboard(node, {\n        // Set the container so that copying also works in dialogs.\n        // Otherwise, the copy event is swallowed somehow.\n        container: node.parentElement ?? undefined,\n      })\n    }\n\n    return () => {\n      if (clipboardRef.current !== null) {\n        clipboardRef.current.destroy()\n      }\n    }\n  }, [])\n\n  return (\n    <StyledCopyButton\n      data-testid=\"stCodeCopyButton\"\n      title=\"Copy to clipboard\"\n      ref={buttonRef}\n      data-clipboard-text={text}\n      style={{\n        top: 0,\n        right: 0,\n      }}\n    >\n      <CopyIcon size=\"16\" />\n    </StyledCopyButton>\n  )\n}\n\nexport default CopyButton\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAEhD,OAAOC,SAAS,MAAM,WAAW;AACjC,SAASC,IAAI,IAAIC,QAAQ,QAAQ,eAAe;AAEhD,SAASC,gBAAgB;AAA6B,SAAAC,GAAA,IAAAC,IAAA;AAMtD,MAAMC,UAA2B,GAAGC,IAAA,IAAc;EAAA,IAAb;IAAEC;EAAK,CAAC,GAAAD,IAAA;EAC3C,MAAME,SAAS,GAAGV,MAAM,CAAoB,IAAI,CAAC;EACjD,MAAMW,YAAY,GAAGX,MAAM,CAAmB,IAAI,CAAC;EAEnDD,SAAS,CAAC,MAAM;IACd,MAAMa,IAAI,GAAGF,SAAS,CAACG,OAAO;IAE9B,IAAID,IAAI,KAAK,IAAI,EAAE;MACjBD,YAAY,CAACE,OAAO,GAAG,IAAIZ,SAAS,CAACW,IAAI,EAAE;QACzC;QACA;QACAE,SAAS,EAAEF,IAAI,CAACG,aAAa,IAAIC;MACnC,CAAC,CAAC;IACJ;IAEA,OAAO,MAAM;MACX,IAAIL,YAAY,CAACE,OAAO,KAAK,IAAI,EAAE;QACjCF,YAAY,CAACE,OAAO,CAACI,OAAO,CAAC,CAAC;MAChC;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEX,IAAA,CAACF,gBAAgB;IACf,eAAY,kBAAkB;IAC9Bc,KAAK,EAAC,mBAAmB;IACzBC,GAAG,EAAET,SAAU;IACf,uBAAqBD,IAAK;IAC1BW,KAAK,EAAE;MACLC,GAAG,EAAE,CAAC;MACNC,KAAK,EAAE;IACT,CAAE;IAAAC,QAAA,eAEFjB,IAAA,CAACH,QAAQ;MAACqB,IAAI,EAAC;IAAI,CAAE;EAAC,CACN,CAAC;AAEvB,CAAC;AAED,eAAejB,UAAU"}