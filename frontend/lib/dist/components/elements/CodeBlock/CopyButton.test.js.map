{"version":3,"file":"CopyButton.test.js","names":["React","screen","Clipboard","render","CopyButton","jsx","_jsx","jest","mock","describe","beforeEach","clearAllMocks","it","text","expect","getByTestId","toBeInTheDocument","toHaveAttribute","toHaveBeenCalled","unmount","mockClipboard","instances","mockDestroy","destroy"],"sources":["../../../../src/components/elements/CodeBlock/CopyButton.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\nimport \"@testing-library/jest-dom\"\nimport { screen } from \"@testing-library/react\"\nimport Clipboard from \"clipboard\"\nimport { render } from \"@streamlit/lib/src/test_util\"\n\nimport CopyButton from \"./CopyButton\"\n\njest.mock(\"clipboard\")\n\ndescribe(\"CopyButton Element\", () => {\n  beforeEach(() => {\n    jest.clearAllMocks()\n  })\n\n  it(\"renders without crashing\", () => {\n    render(<CopyButton text=\"test\" />)\n    expect(screen.getByTestId(\"stCopyButton\")).toBeInTheDocument()\n  })\n\n  describe(\"attributes\", () => {\n    it(\"should have title\", () => {\n      render(<CopyButton text=\"test\" />)\n      expect(screen.getByTestId(\"stCopyButton\")).toHaveAttribute(\n        \"title\",\n        \"Copy to clipboard\"\n      )\n    })\n\n    it(\"should have clipboard text\", () => {\n      render(<CopyButton text=\"test\" />)\n      expect(screen.getByTestId(\"stCopyButton\")).toHaveAttribute(\n        \"data-clipboard-text\",\n        \"test\"\n      )\n    })\n  })\n\n  describe(\"calling clipboard\", () => {\n    it(\"should be called on did mount\", () => {\n      render(<CopyButton text=\"test\" />)\n\n      expect(Clipboard).toHaveBeenCalled()\n    })\n\n    it(\"should be called on unmount\", () => {\n      const { unmount } = render(<CopyButton text=\"test\" />)\n\n      unmount()\n\n      // @ts-expect-error\n      const mockClipboard = Clipboard.mock.instances[0]\n      const mockDestroy = mockClipboard.destroy\n\n      expect(mockDestroy).toHaveBeenCalled()\n    })\n  })\n})\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,2BAA2B;AAClC,SAASC,MAAM,QAAQ,wBAAwB;AAC/C,OAAOC,SAAS,MAAM,WAAW;AACjC,SAASC,MAAM;AAEf,OAAOC,UAAU;AAAoB,SAAAC,GAAA,IAAAC,IAAA;AAErCC,IAAI,CAACC,IAAI,CAAC,WAAW,CAAC;AAEtBC,QAAQ,CAAC,oBAAoB,EAAE,MAAM;EACnCC,UAAU,CAAC,MAAM;IACfH,IAAI,CAACI,aAAa,CAAC,CAAC;EACtB,CAAC,CAAC;EAEFC,EAAE,CAAC,0BAA0B,EAAE,MAAM;IACnCT,MAAM,eAACG,IAAA,CAACF,UAAU;MAACS,IAAI,EAAC;IAAM,CAAE,CAAC,CAAC;IAClCC,MAAM,CAACb,MAAM,CAACc,WAAW,CAAC,cAAc,CAAC,CAAC,CAACC,iBAAiB,CAAC,CAAC;EAChE,CAAC,CAAC;EAEFP,QAAQ,CAAC,YAAY,EAAE,MAAM;IAC3BG,EAAE,CAAC,mBAAmB,EAAE,MAAM;MAC5BT,MAAM,eAACG,IAAA,CAACF,UAAU;QAACS,IAAI,EAAC;MAAM,CAAE,CAAC,CAAC;MAClCC,MAAM,CAACb,MAAM,CAACc,WAAW,CAAC,cAAc,CAAC,CAAC,CAACE,eAAe,CACxD,OAAO,EACP,mBACF,CAAC;IACH,CAAC,CAAC;IAEFL,EAAE,CAAC,4BAA4B,EAAE,MAAM;MACrCT,MAAM,eAACG,IAAA,CAACF,UAAU;QAACS,IAAI,EAAC;MAAM,CAAE,CAAC,CAAC;MAClCC,MAAM,CAACb,MAAM,CAACc,WAAW,CAAC,cAAc,CAAC,CAAC,CAACE,eAAe,CACxD,qBAAqB,EACrB,MACF,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFR,QAAQ,CAAC,mBAAmB,EAAE,MAAM;IAClCG,EAAE,CAAC,+BAA+B,EAAE,MAAM;MACxCT,MAAM,eAACG,IAAA,CAACF,UAAU;QAACS,IAAI,EAAC;MAAM,CAAE,CAAC,CAAC;MAElCC,MAAM,CAACZ,SAAS,CAAC,CAACgB,gBAAgB,CAAC,CAAC;IACtC,CAAC,CAAC;IAEFN,EAAE,CAAC,6BAA6B,EAAE,MAAM;MACtC,MAAM;QAAEO;MAAQ,CAAC,GAAGhB,MAAM,eAACG,IAAA,CAACF,UAAU;QAACS,IAAI,EAAC;MAAM,CAAE,CAAC,CAAC;MAEtDM,OAAO,CAAC,CAAC;;MAET;MACA,MAAMC,aAAa,GAAGlB,SAAS,CAACM,IAAI,CAACa,SAAS,CAAC,CAAC,CAAC;MACjD,MAAMC,WAAW,GAAGF,aAAa,CAACG,OAAO;MAEzCT,MAAM,CAACQ,WAAW,CAAC,CAACJ,gBAAgB,CAAC,CAAC;IACxC,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC"}