{"version":3,"file":"Html.test.js","names":["React","screen","render","Html","HtmlProto","jsx","_jsx","getProps","elementProps","arguments","length","undefined","element","create","body","width","describe","it","props","html","getByTestId","expect","toBeInTheDocument","toHaveTextContent","toHaveStyle","toHaveClass","getByText","parentElement","queryByTestId","not"],"sources":["../../../../src/components/elements/Html/Html.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport \"@testing-library/jest-dom\"\nimport { screen } from \"@testing-library/react\"\n\nimport { render } from \"@streamlit/lib/src/test_util\"\nimport { Html as HtmlProto } from \"@streamlit/lib/src/proto\"\n\nimport Html, { HtmlProps } from \"./Html\"\n\nconst getProps = (elementProps: Partial<HtmlProto> = {}): HtmlProps => ({\n  element: HtmlProto.create({\n    body: \"<div>Test Html</div>\",\n    ...elementProps,\n  }),\n  width: 100,\n})\n\ndescribe(\"HTML element\", () => {\n  it(\"renders the element as expected\", () => {\n    const props = getProps()\n    render(<Html {...props} />)\n    const html = screen.getByTestId(\"stHtml\")\n    expect(html).toBeInTheDocument()\n    expect(html).toHaveTextContent(\"Test Html\")\n    expect(html).toHaveStyle(\"width: 100px\")\n    expect(html).toHaveClass(\"stHtml\")\n  })\n\n  it(\"handles <style> tags - applies style\", () => {\n    const props = getProps({\n      body: `\n        <style>\n            #random { color: orange; }\n        </style>\n        <div id=\"random\">Test Html</div>\n    `,\n    })\n    render(<Html {...props} />)\n    const html = screen.getByTestId(\"stHtml\")\n    expect(html).toHaveTextContent(\"Test Html\")\n    // Check that the style tag is applied to the div\n    expect(screen.getByText(\"Test Html\")).toHaveStyle(\"color: orange\")\n    // Check that the unnecessary spacing handling by hiding parent\n    // eslint-disable-next-line testing-library/no-node-access\n    expect(html.parentElement).toHaveClass(\"stHtml-empty\")\n  })\n\n  it(\"sanitizes <script> tags\", () => {\n    const props = getProps({\n      body: `<script> alert('BEWARE - the script tag is scripting'); </script>`,\n    })\n    render(<Html {...props} />)\n    expect(screen.queryByTestId(\"stHtml\")).not.toBeInTheDocument()\n  })\n\n  it(\"sanitizes <svg> tags\", () => {\n    const props = getProps({\n      body: `\n        <svg width=\"100\" height=\"100\">\n            <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"green\" stroke-width=\"4\" fill=\"yellow\" />\n        </svg>\n    `,\n    })\n    render(<Html {...props} />)\n    expect(screen.getByTestId(\"stHtml\")).toHaveTextContent(\"\")\n  })\n})\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,2BAA2B;AAClC,SAASC,MAAM,QAAQ,wBAAwB;AAE/C,SAASC,MAAM;AACf,SAASC,IAAI,IAAIC,SAAS;AAE1B,OAAOD,IAAI;AAA6B,SAAAE,GAAA,IAAAC,IAAA;AAExC,MAAMC,QAAQ,GAAG,SAAAA,CAAA;EAAA,IAACC,YAAgC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAAA,OAAiB;IACtEG,OAAO,EAAER,SAAS,CAACS,MAAM,CAAC;MACxBC,IAAI,EAAE,sBAAsB;MAC5B,GAAGN;IACL,CAAC,CAAC;IACFO,KAAK,EAAE;EACT,CAAC;AAAA,CAAC;AAEFC,QAAQ,CAAC,cAAc,EAAE,MAAM;EAC7BC,EAAE,CAAC,iCAAiC,EAAE,MAAM;IAC1C,MAAMC,KAAK,GAAGX,QAAQ,CAAC,CAAC;IACxBL,MAAM,eAACI,IAAA,CAACH,IAAI;MAAA,GAAKe;IAAK,CAAG,CAAC,CAAC;IAC3B,MAAMC,IAAI,GAAGlB,MAAM,CAACmB,WAAW,CAAC,QAAQ,CAAC;IACzCC,MAAM,CAACF,IAAI,CAAC,CAACG,iBAAiB,CAAC,CAAC;IAChCD,MAAM,CAACF,IAAI,CAAC,CAACI,iBAAiB,CAAC,WAAW,CAAC;IAC3CF,MAAM,CAACF,IAAI,CAAC,CAACK,WAAW,CAAC,cAAc,CAAC;IACxCH,MAAM,CAACF,IAAI,CAAC,CAACM,WAAW,CAAC,QAAQ,CAAC;EACpC,CAAC,CAAC;EAEFR,EAAE,CAAC,sCAAsC,EAAE,MAAM;IAC/C,MAAMC,KAAK,GAAGX,QAAQ,CAAC;MACrBO,IAAI,EAAG;AACb;AACA;AACA;AACA;AACA;IACI,CAAC,CAAC;IACFZ,MAAM,eAACI,IAAA,CAACH,IAAI;MAAA,GAAKe;IAAK,CAAG,CAAC,CAAC;IAC3B,MAAMC,IAAI,GAAGlB,MAAM,CAACmB,WAAW,CAAC,QAAQ,CAAC;IACzCC,MAAM,CAACF,IAAI,CAAC,CAACI,iBAAiB,CAAC,WAAW,CAAC;IAC3C;IACAF,MAAM,CAACpB,MAAM,CAACyB,SAAS,CAAC,WAAW,CAAC,CAAC,CAACF,WAAW,CAAC,eAAe,CAAC;IAClE;IACA;IACAH,MAAM,CAACF,IAAI,CAACQ,aAAa,CAAC,CAACF,WAAW,CAAC,cAAc,CAAC;EACxD,CAAC,CAAC;EAEFR,EAAE,CAAC,yBAAyB,EAAE,MAAM;IAClC,MAAMC,KAAK,GAAGX,QAAQ,CAAC;MACrBO,IAAI,EAAG;IACT,CAAC,CAAC;IACFZ,MAAM,eAACI,IAAA,CAACH,IAAI;MAAA,GAAKe;IAAK,CAAG,CAAC,CAAC;IAC3BG,MAAM,CAACpB,MAAM,CAAC2B,aAAa,CAAC,QAAQ,CAAC,CAAC,CAACC,GAAG,CAACP,iBAAiB,CAAC,CAAC;EAChE,CAAC,CAAC;EAEFL,EAAE,CAAC,sBAAsB,EAAE,MAAM;IAC/B,MAAMC,KAAK,GAAGX,QAAQ,CAAC;MACrBO,IAAI,EAAG;AACb;AACA;AACA;AACA;IACI,CAAC,CAAC;IACFZ,MAAM,eAACI,IAAA,CAACH,IAAI;MAAA,GAAKe;IAAK,CAAG,CAAC,CAAC;IAC3BG,MAAM,CAACpB,MAAM,CAACmB,WAAW,CAAC,QAAQ,CAAC,CAAC,CAACG,iBAAiB,CAAC,EAAE,CAAC;EAC5D,CAAC,CAAC;AACJ,CAAC,CAAC"}