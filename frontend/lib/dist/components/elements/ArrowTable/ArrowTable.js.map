{"version":3,"file":"ArrowTable.js","names":["React","range","Quiver","StyledEmptyTableCell","StyledTable","StyledTableCell","StyledTableCellHeader","StyledTableContainer","jsx","_jsx","jsxs","_jsxs","ArrowTable","props","table","element","cssId","cssStyles","caption","headerRows","rows","columns","dimensions","allRows","columnHeaders","slice","dataRows","className","children","id","length","map","rowIndex","generateTableRow","colSpan","columnIndex","generateTableCell","type","cssClass","content","contentType","displayContent","field","getCell","formattedContent","format","headerColumns","cellDataType","types","data","pandas_type","isNumeric","style","textAlign","scope","Error"],"sources":["../../../../src/components/elements/ArrowTable/ArrowTable.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from \"react\"\n\nimport range from \"lodash/range\"\n\nimport { Quiver } from \"@streamlit/lib/src/dataframes/Quiver\"\n\nimport {\n  StyledEmptyTableCell,\n  StyledTable,\n  StyledTableCell,\n  StyledTableCellHeader,\n  StyledTableContainer,\n} from \"./styled-components\"\n\nexport interface TableProps {\n  element: Quiver\n}\n\nexport function ArrowTable(props: Readonly<TableProps>): ReactElement {\n  const table = props.element\n  const { cssId, cssStyles, caption } = table\n  const { headerRows, rows, columns } = table.dimensions\n  const allRows = range(rows)\n  const columnHeaders = allRows.slice(0, headerRows)\n  const dataRows = allRows.slice(headerRows)\n\n  return (\n    <StyledTableContainer className=\"stTable\" data-testid=\"stTable\">\n      {cssStyles && <style>{cssStyles}</style>}\n      <StyledTable id={cssId} data-testid=\"stTableStyledTable\">\n        {caption && (\n          <caption>\n            <small>{caption}</small>\n          </caption>\n        )}\n        {columnHeaders.length > 0 && (\n          <thead>\n            {columnHeaders.map(rowIndex =>\n              generateTableRow(table, rowIndex, columns)\n            )}\n          </thead>\n        )}\n        <tbody>\n          {dataRows.length === 0 ? (\n            <tr>\n              <StyledEmptyTableCell\n                data-testid=\"stTableStyledEmptyTableCell\"\n                colSpan={columns || 1}\n              >\n                empty\n              </StyledEmptyTableCell>\n            </tr>\n          ) : (\n            dataRows.map(rowIndex =>\n              generateTableRow(table, rowIndex, columns)\n            )\n          )}\n        </tbody>\n      </StyledTable>\n    </StyledTableContainer>\n  )\n}\n\nfunction generateTableRow(\n  table: Quiver,\n  rowIndex: number,\n  columns: number\n): ReactElement {\n  return (\n    <tr key={rowIndex}>\n      {range(columns).map(columnIndex =>\n        generateTableCell(table, rowIndex, columnIndex)\n      )}\n    </tr>\n  )\n}\n\nfunction generateTableCell(\n  table: Quiver,\n  rowIndex: number,\n  columnIndex: number\n): ReactElement {\n  const {\n    type,\n    cssId,\n    cssClass,\n    content,\n    contentType,\n    displayContent,\n    field,\n  } = table.getCell(rowIndex, columnIndex)\n\n  const formattedContent =\n    displayContent || Quiver.format(content, contentType, field)\n\n  const { headerColumns } = table.dimensions\n  const cellDataType =\n    table.types.data[columnIndex - headerColumns]?.pandas_type\n  const isNumeric = cellDataType === \"int64\" || cellDataType === \"float64\"\n\n  const style: React.CSSProperties = {\n    textAlign: isNumeric ? \"right\" : \"left\",\n  }\n\n  switch (type) {\n    case \"blank\": {\n      return (\n        <StyledTableCellHeader key={columnIndex} className={cssClass}>\n          &nbsp;\n        </StyledTableCellHeader>\n      )\n    }\n    case \"index\": {\n      return (\n        <StyledTableCellHeader\n          key={columnIndex}\n          scope=\"row\"\n          id={cssId}\n          className={cssClass}\n        >\n          {formattedContent}\n        </StyledTableCellHeader>\n      )\n    }\n    case \"columns\": {\n      return (\n        <StyledTableCellHeader\n          key={columnIndex}\n          scope=\"col\"\n          className={cssClass}\n          style={style}\n        >\n          {formattedContent}\n        </StyledTableCellHeader>\n      )\n    }\n    case \"data\": {\n      return (\n        <StyledTableCell key={columnIndex} id={cssId} style={style}>\n          {formattedContent}\n        </StyledTableCell>\n      )\n    }\n    default: {\n      throw new Error(`Cannot parse type \"${type}\".`)\n    }\n  }\n}\n\nexport default ArrowTable\n"],"mappings":"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"}