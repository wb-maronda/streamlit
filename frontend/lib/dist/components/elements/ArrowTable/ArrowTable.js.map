{"version":3,"file":"ArrowTable.js","names":["range","React","Quiver","StyledEmptyTableCell","StyledTable","StyledTableCell","StyledTableCellHeader","StyledTableContainer","jsx","_jsx","jsxs","_jsxs","ArrowTable","props","table","element","cssId","cssStyles","caption","headerRows","rows","columns","dimensions","allRows","columnHeaders","slice","dataRows","children","id","length","map","rowIndex","generateTableRow","colSpan","columnIndex","generateTableCell","_table$types$data","type","cssClass","content","contentType","displayContent","field","getCell","formattedContent","format","headerColumns","cellDataType","types","data","pandas_type","isNumeric","style","textAlign","className","scope","Error","concat"],"sources":["../../../../src/components/elements/ArrowTable/ArrowTable.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport range from \"lodash/range\"\nimport React, { ReactElement } from \"react\"\n\nimport { Quiver } from \"@streamlit/lib/src/dataframes/Quiver\"\nimport {\n  StyledEmptyTableCell,\n  StyledTable,\n  StyledTableCell,\n  StyledTableCellHeader,\n  StyledTableContainer,\n} from \"./styled-components\"\n\nexport interface TableProps {\n  element: Quiver\n}\n\nexport function ArrowTable(props: TableProps): ReactElement {\n  const table = props.element\n  const { cssId, cssStyles, caption } = table\n  const { headerRows, rows, columns } = table.dimensions\n  const allRows = range(rows)\n  const columnHeaders = allRows.slice(0, headerRows)\n  const dataRows = allRows.slice(headerRows)\n\n  return (\n    <StyledTableContainer data-testid=\"stTable\">\n      {cssStyles && <style>{cssStyles}</style>}\n      <StyledTable id={cssId} data-testid=\"stTableStyledTable\">\n        {caption && (\n          <caption>\n            <small>{caption}</small>\n          </caption>\n        )}\n        {columnHeaders.length > 0 && (\n          <thead>\n            {columnHeaders.map(rowIndex =>\n              generateTableRow(table, rowIndex, columns)\n            )}\n          </thead>\n        )}\n        <tbody>\n          {dataRows.length === 0 ? (\n            <tr>\n              <StyledEmptyTableCell\n                data-testid=\"stTableStyledEmptyTableCell\"\n                colSpan={columns || 1}\n              >\n                empty\n              </StyledEmptyTableCell>\n            </tr>\n          ) : (\n            dataRows.map(rowIndex =>\n              generateTableRow(table, rowIndex, columns)\n            )\n          )}\n        </tbody>\n      </StyledTable>\n    </StyledTableContainer>\n  )\n}\n\nfunction generateTableRow(\n  table: Quiver,\n  rowIndex: number,\n  columns: number\n): ReactElement {\n  return (\n    <tr key={rowIndex}>\n      {range(columns).map(columnIndex =>\n        generateTableCell(table, rowIndex, columnIndex)\n      )}\n    </tr>\n  )\n}\n\nfunction generateTableCell(\n  table: Quiver,\n  rowIndex: number,\n  columnIndex: number\n): ReactElement {\n  const {\n    type,\n    cssId,\n    cssClass,\n    content,\n    contentType,\n    displayContent,\n    field,\n  } = table.getCell(rowIndex, columnIndex)\n\n  const formattedContent =\n    displayContent || Quiver.format(content, contentType, field)\n\n  const { headerColumns } = table.dimensions\n  const cellDataType =\n    table.types.data[columnIndex - headerColumns]?.pandas_type\n  const isNumeric = cellDataType === \"int64\" || cellDataType === \"float64\"\n\n  const style: React.CSSProperties = {\n    textAlign: isNumeric ? \"right\" : \"left\",\n  }\n\n  switch (type) {\n    case \"blank\": {\n      return (\n        <StyledTableCellHeader key={columnIndex} className={cssClass}>\n          &nbsp;\n        </StyledTableCellHeader>\n      )\n    }\n    case \"index\": {\n      return (\n        <StyledTableCellHeader\n          key={columnIndex}\n          scope=\"row\"\n          id={cssId}\n          className={cssClass}\n        >\n          {formattedContent}\n        </StyledTableCellHeader>\n      )\n    }\n    case \"columns\": {\n      return (\n        <StyledTableCellHeader\n          key={columnIndex}\n          scope=\"col\"\n          className={cssClass}\n          style={style}\n        >\n          {formattedContent}\n        </StyledTableCellHeader>\n      )\n    }\n    case \"data\": {\n      return (\n        <StyledTableCell key={columnIndex} id={cssId} style={style}>\n          {formattedContent}\n        </StyledTableCell>\n      )\n    }\n    default: {\n      throw new Error(`Cannot parse type \"${type}\".`)\n    }\n  }\n}\n\nexport default ArrowTable\n"],"mappings":"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"}