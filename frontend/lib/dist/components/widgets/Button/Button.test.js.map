{"version":3,"file":"Button.test.js","names":["React","fireEvent","screen","render","WidgetStateManager","Button","ButtonProto","jsx","_jsx","jest","mock","sendBackMsg","fn","getProps","elementProps","arguments","length","undefined","widgetProps","element","create","id","label","width","disabled","widgetMgr","describe","it","props","buttonWidget","getByRole","expect","toBeInTheDocument","stButtonDiv","getByTestId","toHaveClass","toHaveStyle","name","click","setTriggerValue","toHaveBeenCalledWith","fromUi","fragmentId","toBeDisabled","children","useContainerWidth","help"],"sources":["../../../../src/components/widgets/Button/Button.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport { fireEvent, screen } from \"@testing-library/react\"\n\nimport \"@testing-library/jest-dom\"\nimport { render } from \"@streamlit/lib/src/test_util\"\nimport { WidgetStateManager } from \"@streamlit/lib/src/WidgetStateManager\"\nimport { Button as ButtonProto } from \"@streamlit/lib/src/proto\"\n\nimport Button, { Props } from \"./Button\"\n\njest.mock(\"@streamlit/lib/src/WidgetStateManager\")\n\nconst sendBackMsg = jest.fn()\n\nconst getProps = (\n  elementProps: Partial<ButtonProto> = {},\n  widgetProps: Partial<Props> = {}\n): Props => ({\n  element: ButtonProto.create({\n    id: \"1\",\n    label: \"Label\",\n    ...elementProps,\n  }),\n  width: 250,\n  disabled: false,\n  // @ts-expect-error\n  widgetMgr: new WidgetStateManager(sendBackMsg),\n  ...widgetProps,\n})\n\ndescribe(\"Button widget\", () => {\n  it(\"renders without crashing\", () => {\n    const props = getProps()\n    render(<Button {...props} />)\n\n    const buttonWidget = screen.getByRole(\"button\")\n    expect(buttonWidget).toBeInTheDocument()\n  })\n\n  it(\"should have correct className and style\", () => {\n    const props = getProps()\n    render(<Button {...props} />)\n\n    const stButtonDiv = screen.getByTestId(\"stButton\")\n\n    expect(stButtonDiv).toHaveClass(\"stButton\")\n    expect(stButtonDiv).toHaveStyle(`width: ${props.width}px`)\n  })\n\n  it(\"should render a label within the button\", () => {\n    const props = getProps()\n    render(<Button {...props} />)\n\n    const buttonWidget = screen.getByRole(\"button\", {\n      name: `${props.element.label}`,\n    })\n\n    expect(buttonWidget).toBeInTheDocument()\n  })\n\n  describe(\"BaseButton props should work\", () => {\n    it(\"onClick prop\", () => {\n      const props = getProps()\n      render(<Button {...props} />)\n\n      const buttonWidget = screen.getByRole(\"button\")\n      fireEvent.click(buttonWidget)\n\n      expect(props.widgetMgr.setTriggerValue).toHaveBeenCalledWith(\n        props.element,\n        { fromUi: true },\n        undefined\n      )\n    })\n\n    it(\"passes fragmentId to onClick prop\", () => {\n      const props = getProps(undefined, {\n        fragmentId: \"myFragmentId\",\n      })\n      render(<Button {...props} />)\n\n      const buttonWidget = screen.getByRole(\"button\")\n      fireEvent.click(buttonWidget)\n\n      expect(props.widgetMgr.setTriggerValue).toHaveBeenCalledWith(\n        props.element,\n        { fromUi: true },\n        \"myFragmentId\"\n      )\n    })\n\n    it(\"can be disabled\", () => {\n      const props = getProps({}, { disabled: true })\n      render(<Button {...props} />)\n\n      const buttonWidget = screen.getByRole(\"button\")\n\n      expect(buttonWidget).toBeDisabled()\n    })\n  })\n\n  it(\"does not use container width by default\", () => {\n    render(<Button {...getProps()}>Hello</Button>)\n\n    const buttonWidget = screen.getByRole(\"button\")\n    expect(buttonWidget).toHaveStyle(\"width: auto\")\n  })\n\n  it(\"passes useContainerWidth property without help correctly\", () => {\n    render(<Button {...getProps({ useContainerWidth: true })}>Hello</Button>)\n\n    const buttonWidget = screen.getByRole(\"button\")\n    expect(buttonWidget).toHaveStyle(\"width: 100%\")\n  })\n\n  it(\"passes useContainerWidth property with help correctly\", () => {\n    render(\n      <Button {...getProps({ useContainerWidth: true, help: \"mockHelpText\" })}>\n        Hello\n      </Button>\n    )\n\n    const buttonWidget = screen.getByRole(\"button\")\n    expect(buttonWidget).toHaveStyle(`width: ${250}px`)\n  })\n})\n"],"mappings":"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"}