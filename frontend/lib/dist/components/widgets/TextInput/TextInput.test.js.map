{"version":3,"file":"TextInput.test.js","names":["React","fireEvent","screen","within","userEvent","render","WidgetStateManager","LabelVisibilityMessage","LabelVisibilityMessageProto","TextInput","TextInputProto","mockTheme","jsx","_jsx","getProps","elementProps","arguments","length","undefined","widgetProps","element","create","label","default","placeholder","type","Type","DEFAULT","width","disabled","theme","emotion","widgetMgr","sendRerunBackMsg","jest","fn","formsDataChanged","describe","it","props","textInput","getByRole","expect","toBeInTheDocument","widgetLabel","getByText","labelVisibility","value","LabelVisibilityOptions","HIDDEN","getByTestId","toHaveStyle","COLLAPSED","toHaveAttribute","defaultProps","textInputContainer","showButton","queryByRole","not","passwordProps","PASSWORD","passwordTextInput","getByPlaceholderText","unmount","autocomplete","autocompleteTextInput","spyOn","setStringValue","toHaveBeenCalledWith","fromUi","fragmentId","toHaveClass","toBeDisabled","change","target","blur","user","setup","click","keyboard","toHaveBeenLastCalledWith","keyPress","key","toHaveBeenCalledTimes","maxChars","toHaveValue","formId","setStringValueSpy","mockReturnValue","findByText","setFormSubmitBehaviors","submitForm","toHaveTextContent","queryByTestId","toHaveFocus","textInputLabel1","forId1","getAttribute","textInputLabel2","forId2","toBe"],"sources":["../../../../src/components/widgets/TextInput/TextInput.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\nimport \"@testing-library/jest-dom\"\n\nimport { fireEvent, screen, within } from \"@testing-library/react\"\nimport userEvent from \"@testing-library/user-event\"\n\nimport { render } from \"@streamlit/lib/src/test_util\"\nimport { WidgetStateManager } from \"@streamlit/lib/src/WidgetStateManager\"\nimport {\n  LabelVisibilityMessage as LabelVisibilityMessageProto,\n  TextInput as TextInputProto,\n} from \"@streamlit/lib/src/proto\"\nimport { mockTheme } from \"@streamlit/lib/src/mocks/mockTheme\"\n\nimport TextInput, { Props } from \"./TextInput\"\n\nconst getProps = (\n  elementProps: Partial<TextInputProto> = {},\n  widgetProps: Partial<Props> = {}\n): Props => ({\n  element: TextInputProto.create({\n    label: \"Label\",\n    default: \"\",\n    placeholder: \"Placeholder\",\n    type: TextInputProto.Type.DEFAULT,\n    ...elementProps,\n  }),\n  width: 300,\n  disabled: false,\n  theme: mockTheme.emotion,\n  widgetMgr: new WidgetStateManager({\n    sendRerunBackMsg: jest.fn(),\n    formsDataChanged: jest.fn(),\n  }),\n  ...widgetProps,\n})\n\ndescribe(\"TextInput widget\", () => {\n  it(\"renders without crashing\", () => {\n    const props = getProps()\n    render(<TextInput {...props} />)\n\n    const textInput = screen.getByRole(\"textbox\")\n    expect(textInput).toBeInTheDocument()\n  })\n\n  it(\"shows a label\", () => {\n    const props = getProps()\n    render(<TextInput {...props} />)\n\n    const widgetLabel = screen.getByText(`${props.element.label}`)\n    expect(widgetLabel).toBeInTheDocument()\n  })\n\n  it(\"pass labelVisibility prop to StyledWidgetLabel correctly when hidden\", () => {\n    const props = getProps({\n      labelVisibility: {\n        value: LabelVisibilityMessageProto.LabelVisibilityOptions.HIDDEN,\n      },\n    })\n\n    render(<TextInput {...props} />)\n    expect(screen.getByTestId(\"stWidgetLabel\")).toHaveStyle(\n      \"visibility: hidden\"\n    )\n  })\n\n  it(\"pass labelVisibility prop to StyledWidgetLabel correctly when collapsed\", () => {\n    const props = getProps({\n      labelVisibility: {\n        value: LabelVisibilityMessageProto.LabelVisibilityOptions.COLLAPSED,\n      },\n    })\n    render(<TextInput {...props} />)\n    expect(screen.getByTestId(\"stWidgetLabel\")).toHaveStyle(\"display: none\")\n  })\n\n  it(\"shows a placeholder\", () => {\n    const props = getProps()\n    render(<TextInput {...props} />)\n\n    const textInput = screen.getByRole(\"textbox\")\n    expect(textInput).toHaveAttribute(\"placeholder\", props.element.placeholder)\n  })\n\n  it(\"handles default text input type properly\", () => {\n    const defaultProps = getProps({ type: TextInputProto.Type.DEFAULT })\n    render(<TextInput {...defaultProps} />)\n    const textInput = screen.getByRole(\"textbox\")\n    expect(textInput).toHaveAttribute(\"type\", \"text\")\n    // Check that no show/hide button renders\n    const textInputContainer = screen.getByTestId(\"stTextInputRootElement\")\n    const showButton = within(textInputContainer).queryByRole(\"button\")\n    expect(showButton).not.toBeInTheDocument()\n  })\n\n  it(\"handles password text input type properly\", () => {\n    const passwordProps = getProps({ type: TextInputProto.Type.PASSWORD })\n    render(<TextInput {...passwordProps} />)\n    const passwordTextInput = screen.getByPlaceholderText(\"Placeholder\")\n    expect(passwordTextInput).toHaveAttribute(\"type\", \"password\")\n    // Check for the show/hide button\n    const textInputContainer = screen.getByTestId(\"stTextInputRootElement\")\n    const showButton = within(textInputContainer).getByRole(\"button\")\n    expect(showButton).toBeInTheDocument()\n  })\n\n  it(\"handles TextInputProto.autocomplete\", () => {\n    let props = getProps()\n    const { unmount } = render(<TextInput {...props} />)\n    const textInput = screen.getByRole(\"textbox\")\n    expect(textInput).toHaveAttribute(\"autoComplete\", \"\")\n    // unmount the initial component\n    unmount()\n\n    props = getProps({ autocomplete: \"one-time-password\" })\n    render(<TextInput {...props} />)\n    const autocompleteTextInput = screen.getByRole(\"textbox\")\n    expect(autocompleteTextInput).toHaveAttribute(\n      \"autoComplete\",\n      \"one-time-password\"\n    )\n  })\n\n  it(\"sets widget value on mount\", () => {\n    const props = getProps()\n    jest.spyOn(props.widgetMgr, \"setStringValue\")\n    render(<TextInput {...props} />)\n\n    expect(props.widgetMgr.setStringValue).toHaveBeenCalledWith(\n      props.element,\n      props.element.default,\n      { fromUi: false },\n      undefined\n    )\n  })\n\n  it(\"can pass fragmentId to setStringValue\", () => {\n    const props = getProps(undefined, { fragmentId: \"myFragmentId\" })\n    jest.spyOn(props.widgetMgr, \"setStringValue\")\n    render(<TextInput {...props} />)\n\n    expect(props.widgetMgr.setStringValue).toHaveBeenCalledWith(\n      props.element,\n      props.element.default,\n      { fromUi: false },\n      \"myFragmentId\"\n    )\n  })\n\n  it(\"has correct className and style\", () => {\n    const props = getProps()\n    render(<TextInput {...props} />)\n    const textInput = screen.getByTestId(\"stTextInput\")\n\n    expect(textInput).toHaveClass(\"stTextInput\")\n    expect(textInput).toHaveStyle(`width: ${props.width}px`)\n  })\n\n  it(\"can be disabled\", () => {\n    const props = getProps({}, { disabled: true })\n    render(<TextInput {...props} />)\n    const textInput = screen.getByRole(\"textbox\")\n    expect(textInput).toBeDisabled()\n  })\n\n  it(\"sets widget value on blur\", () => {\n    const props = getProps()\n    jest.spyOn(props.widgetMgr, \"setStringValue\")\n    render(<TextInput {...props} />)\n\n    const textInput = screen.getByRole(\"textbox\")\n    fireEvent.change(textInput, { target: { value: \"testing\" } })\n    fireEvent.blur(textInput)\n\n    expect(props.widgetMgr.setStringValue).toHaveBeenCalledWith(\n      props.element,\n      \"testing\",\n      {\n        fromUi: true,\n      },\n      undefined\n    )\n  })\n\n  it(\"sets widget value when enter is pressed\", async () => {\n    const user = userEvent.setup()\n    const props = getProps()\n    jest.spyOn(props.widgetMgr, \"setStringValue\")\n    render(<TextInput {...props} />)\n    const textInput = screen.getByRole(\"textbox\")\n\n    // userEvent necessary to trigger onKeyPress\n    // fireEvent only dispatches DOM events vs. simulating full interactions\n    await user.click(textInput)\n    await user.keyboard(\"testing{Enter}\")\n\n    expect(props.widgetMgr.setStringValue).toHaveBeenLastCalledWith(\n      props.element,\n      \"testing\",\n      {\n        fromUi: true,\n      },\n      undefined\n    )\n  })\n\n  it(\"doesn't set widget value when not dirty\", () => {\n    const props = getProps()\n    jest.spyOn(props.widgetMgr, \"setStringValue\")\n    render(<TextInput {...props} />)\n\n    const textInput = screen.getByRole(\"textbox\")\n    fireEvent.keyPress(textInput, { key: \"Enter\" })\n\n    expect(props.widgetMgr.setStringValue).toHaveBeenCalledTimes(1)\n\n    fireEvent.blur(textInput)\n    expect(props.widgetMgr.setStringValue).toHaveBeenCalledTimes(1)\n  })\n\n  it(\"limits input length if max_chars is passed\", () => {\n    const props = getProps({ maxChars: 10 })\n    render(<TextInput {...props} />)\n\n    const textInput = screen.getByRole(\"textbox\")\n    fireEvent.change(textInput, { target: { value: \"0123456789\" } })\n    expect(textInput).toHaveValue(\"0123456789\")\n\n    fireEvent.change(textInput, { target: { value: \"0123456789a\" } })\n    expect(textInput).toHaveValue(\"0123456789\")\n  })\n\n  it(\"does update widget value on text changes when inside of a form\", async () => {\n    const props = getProps({ formId: \"formId\" })\n    const setStringValueSpy = jest.spyOn(props.widgetMgr, \"setStringValue\")\n    jest.spyOn(props.widgetMgr, \"allowFormEnterToSubmit\").mockReturnValue(true)\n\n    render(<TextInput {...props} />)\n\n    const textInput = screen.getByRole(\"textbox\")\n    fireEvent.change(textInput, { target: { value: \"TEST\" } })\n    expect(textInput).toHaveValue(\"TEST\")\n\n    expect(\n      await screen.findByText(\"Press Enter to submit form\")\n    ).toBeInTheDocument()\n\n    expect(setStringValueSpy).toHaveBeenCalledWith(\n      props.element,\n      \"TEST\",\n      {\n        fromUi: true,\n      },\n      undefined\n    )\n  })\n\n  it(\"does not update widget value on text changes when outside of a form\", async () => {\n    const props = getProps()\n    jest.spyOn(props.widgetMgr, \"setStringValue\")\n    render(<TextInput {...props} />)\n\n    const textInput = screen.getByRole(\"textbox\")\n    fireEvent.change(textInput, { target: { value: \"TEST\" } })\n    expect(textInput).toHaveValue(\"TEST\")\n\n    expect(await screen.findByText(\"Press Enter to apply\")).toBeInTheDocument()\n\n    // Check that the last call was in componentDidMount.\n    expect(props.widgetMgr.setStringValue).toHaveBeenLastCalledWith(\n      props.element,\n      props.element.default,\n      {\n        fromUi: false,\n      },\n      undefined\n    )\n  })\n\n  it(\"resets its value when form is cleared\", () => {\n    // Create a widget in a clearOnSubmit form\n    const props = getProps({ formId: \"form\" })\n    props.widgetMgr.setFormSubmitBehaviors(\"form\", true)\n\n    jest.spyOn(props.widgetMgr, \"setStringValue\")\n\n    render(<TextInput {...props} />)\n    const textInput = screen.getByRole(\"textbox\")\n    // Change the widget value\n    fireEvent.change(textInput, { target: { value: \"TEST\" } })\n\n    // \"Submit\" the form\n    props.widgetMgr.submitForm(\"form\", undefined)\n\n    // Our widget should be reset, and the widgetMgr should be updated\n    expect(textInput).toHaveValue(props.element.default)\n    expect(props.widgetMgr.setStringValue).toHaveBeenLastCalledWith(\n      props.element,\n      props.element.default,\n      {\n        fromUi: true,\n      },\n      undefined\n    )\n  })\n\n  it(\"shows Input Instructions on dirty state by default\", async () => {\n    const user = userEvent.setup()\n    const props = getProps()\n    render(<TextInput {...props} />)\n\n    // Trigger dirty state\n    const textInput = screen.getByRole(\"textbox\")\n    await user.click(textInput)\n    await user.keyboard(\"TEST\")\n\n    expect(screen.getByTestId(\"InputInstructions\")).toHaveTextContent(\n      \"Press Enter to apply\"\n    )\n  })\n\n  it(\"shows Input Instructions if in form that allows submit on enter\", async () => {\n    const user = userEvent.setup()\n    const props = getProps({ formId: \"form\" })\n    jest.spyOn(props.widgetMgr, \"allowFormEnterToSubmit\").mockReturnValue(true)\n\n    render(<TextInput {...props} />)\n\n    // Trigger dirty state\n    const textInput = screen.getByRole(\"textbox\")\n    await user.click(textInput)\n    await user.keyboard(\"TEST\")\n\n    expect(screen.getByTestId(\"InputInstructions\")).toHaveTextContent(\n      \"Press Enter to submit form\"\n    )\n  })\n\n  it(\"hides Input Instructions if in form that doesn't allow submit on enter\", async () => {\n    const user = userEvent.setup()\n    const props = getProps({ formId: \"form\" })\n    jest\n      .spyOn(props.widgetMgr, \"allowFormEnterToSubmit\")\n      .mockReturnValue(false)\n\n    render(<TextInput {...props} />)\n\n    // Trigger dirty state\n    const textInput = screen.getByRole(\"textbox\")\n    await user.click(textInput)\n    await user.keyboard(\"TEST\")\n\n    expect(screen.queryByTestId(\"InputInstructions\")).toHaveTextContent(\"\")\n  })\n\n  it(\"hides Please enter to apply text when width is smaller than 180px\", () => {\n    const props = getProps({}, { width: 100 })\n    render(<TextInput {...props} />)\n    expect(screen.queryByTestId(\"InputInstructions\")).not.toBeInTheDocument()\n  })\n\n  it(\"shows Please enter to apply text when width is bigger than 180px\", () => {\n    const props = getProps({}, { width: 190 })\n    render(<TextInput {...props} />)\n    expect(screen.getByTestId(\"InputInstructions\")).toBeInTheDocument()\n  })\n\n  it(\"focuses input when clicking label\", async () => {\n    const props = getProps()\n    render(<TextInput {...props} />)\n    const textInput = screen.getByRole(\"textbox\")\n    expect(textInput).not.toHaveFocus()\n    const label = screen.getByText(props.element.label)\n    const user = userEvent.setup()\n    await user.click(label)\n    expect(textInput).toHaveFocus()\n  })\n\n  it(\"ensures id doesn't change on rerender\", () => {\n    const props = getProps()\n    render(<TextInput {...props} />)\n\n    const textInputLabel1 = screen.getByTestId(\"stWidgetLabel\")\n    const forId1 = textInputLabel1.getAttribute(\"for\")\n\n    // Make some change to cause a rerender\n    const textInput = screen.getByRole(\"textbox\")\n    fireEvent.change(textInput, { target: { value: \"0123456789\" } })\n    expect(textInput).toHaveValue(\"0123456789\")\n\n    const textInputLabel2 = screen.getByTestId(\"stWidgetLabel\")\n    const forId2 = textInputLabel2.getAttribute(\"for\")\n\n    expect(forId2).toBe(forId1)\n  })\n})\n"],"mappings":"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"}