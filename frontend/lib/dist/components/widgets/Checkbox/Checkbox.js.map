{"version":3,"file":"Checkbox.js","names":["React","memo","useCallback","useTheme","LABEL_PLACEMENT","STYLE_TYPE","Checkbox","UICheckbox","transparentize","labelVisibilityProtoValueToEnum","CheckboxProto","useBasicWidgetState","hasLightBackgroundColor","TooltipIcon","Placement","StyledWidgetLabelHelpInline","StreamlitMarkdown","StyledCheckbox","StyledContent","jsx","_jsx","jsxs","_jsxs","_ref","width","element","disabled","widgetMgr","fragmentId","value","setValueWSource","getStateFromWidgetMgr","getDefaultStateFromProto","getCurrStateFromProto","updateWidgetMgrState","onChange","e","target","checked","fromUi","theme","colors","spacing","sizes","lightTheme","color","fadedText40","bodyText","className","children","label","checkmarkType","type","StyleType","TOGGLE","toggle","default","labelPlacement","right","overrides","Root","style","_ref2","$isFocusVisible","marginBottom","none","marginTop","paddingRight","twoThirdsSmFont","backgroundColor","darkenedBgMix25","display","alignItems","Toggle","_ref3","$checked","bgColor","gray70","gray90","checkbox","twoXS","height","transform","boxShadow","ToggleTrack","_ref4","$isHovered","fadedText20","primary","marginRight","marginLeft","paddingLeft","threeXS","minWidth","minHeight","borderBottomLeftRadius","radii","lg","borderTopLeftRadius","borderBottomRightRadius","borderTopRightRadius","Checkmark","_ref5","borderColor","outline","borderLeftWidth","borderWidth","borderRightWidth","borderTopWidth","borderBottomWidth","borderLeftColor","borderRightColor","borderTopColor","borderBottomColor","Label","position","visibility","labelVisibility","source","allowHTML","isLabel","largerLabel","help","content","placement","TOP_RIGHT","getBoolValue","vws","setBoolValue"],"sources":["../../../../src/components/widgets/Checkbox/Checkbox.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { memo, ReactElement, useCallback } from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport {\n  LABEL_PLACEMENT,\n  STYLE_TYPE,\n  Checkbox as UICheckbox,\n} from \"baseui/checkbox\"\nimport { transparentize } from \"color2k\"\n\nimport { labelVisibilityProtoValueToEnum } from \"@streamlit/lib/src/util/utils\"\nimport { Checkbox as CheckboxProto } from \"@streamlit/lib/src/proto\"\nimport { WidgetStateManager } from \"@streamlit/lib/src/WidgetStateManager\"\nimport {\n  useBasicWidgetState,\n  ValueWSource,\n} from \"@streamlit/lib/src/useBasicWidgetState\"\nimport { hasLightBackgroundColor } from \"@streamlit/lib/src/theme\"\nimport TooltipIcon from \"@streamlit/lib/src/components/shared/TooltipIcon\"\nimport { Placement } from \"@streamlit/lib/src/components/shared/Tooltip\"\nimport { StyledWidgetLabelHelpInline } from \"@streamlit/lib/src/components/widgets/BaseWidget\"\nimport StreamlitMarkdown from \"@streamlit/lib/src/components/shared/StreamlitMarkdown\"\n\nimport { StyledCheckbox, StyledContent } from \"./styled-components\"\n\nexport interface Props {\n  disabled: boolean\n  element: CheckboxProto\n  widgetMgr: WidgetStateManager\n  width: number\n  fragmentId?: string\n}\n\nfunction Checkbox({\n  width,\n  element,\n  disabled,\n  widgetMgr,\n  fragmentId,\n}: Readonly<Props>): ReactElement {\n  const [value, setValueWSource] = useBasicWidgetState<boolean, CheckboxProto>(\n    {\n      getStateFromWidgetMgr,\n      getDefaultStateFromProto,\n      getCurrStateFromProto,\n      updateWidgetMgrState,\n      element,\n      widgetMgr,\n      fragmentId,\n    }\n  )\n\n  const onChange = useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>): void => {\n      setValueWSource({ value: e.target.checked, fromUi: true })\n    },\n    [setValueWSource]\n  )\n\n  const theme = useTheme()\n  const { colors, spacing, sizes } = theme\n\n  const lightTheme = hasLightBackgroundColor(theme)\n\n  const color = disabled ? colors.fadedText40 : colors.bodyText\n\n  return (\n    <StyledCheckbox\n      className=\"row-widget stCheckbox\"\n      data-testid=\"stCheckbox\"\n      width={width}\n    >\n      <UICheckbox\n        checked={value}\n        disabled={disabled}\n        onChange={onChange}\n        aria-label={element.label}\n        checkmarkType={\n          element.type === CheckboxProto.StyleType.TOGGLE\n            ? STYLE_TYPE.toggle\n            : STYLE_TYPE.default\n        }\n        labelPlacement={LABEL_PLACEMENT.right}\n        overrides={{\n          Root: {\n            style: ({ $isFocusVisible }: { $isFocusVisible: boolean }) => ({\n              marginBottom: spacing.none,\n              marginTop: spacing.none,\n              paddingRight: spacing.twoThirdsSmFont,\n              backgroundColor: $isFocusVisible ? colors.darkenedBgMix25 : \"\",\n              display: \"flex\",\n              alignItems: \"start\",\n            }),\n          },\n          Toggle: {\n            style: ({ $checked }: { $checked: boolean }) => {\n              let backgroundColor = lightTheme\n                ? colors.bgColor\n                : colors.bodyText\n\n              if (disabled) {\n                backgroundColor = lightTheme ? colors.gray70 : colors.gray90\n              }\n              return {\n                width: `calc(${sizes.checkbox} - ${theme.spacing.twoXS})`,\n                height: `calc(${sizes.checkbox} - ${theme.spacing.twoXS})`,\n                transform: $checked ? `translateX(${sizes.checkbox})` : \"\",\n                backgroundColor,\n                boxShadow: \"\",\n              }\n            },\n          },\n          ToggleTrack: {\n            style: ({\n              $checked,\n              $isHovered,\n            }: {\n              $checked: boolean\n              $isHovered: boolean\n            }) => {\n              let backgroundColor = colors.fadedText40\n\n              if ($isHovered && !disabled) {\n                backgroundColor = colors.fadedText20\n              }\n\n              if ($checked && !disabled) {\n                backgroundColor = colors.primary\n              }\n\n              return {\n                marginRight: 0,\n                marginLeft: 0,\n                marginBottom: 0,\n                marginTop: theme.spacing.twoXS,\n                paddingLeft: theme.spacing.threeXS,\n                paddingRight: theme.spacing.threeXS,\n                width: `calc(2 * ${sizes.checkbox})`,\n                minWidth: `calc(2 * ${sizes.checkbox})`,\n                height: sizes.checkbox,\n                minHeight: sizes.checkbox,\n                borderBottomLeftRadius: theme.radii.lg,\n                borderTopLeftRadius: theme.radii.lg,\n                borderBottomRightRadius: theme.radii.lg,\n                borderTopRightRadius: theme.radii.lg,\n                backgroundColor,\n              }\n            },\n          },\n          Checkmark: {\n            style: ({\n              $isFocusVisible,\n              $checked,\n            }: {\n              $isFocusVisible: boolean\n              $checked: boolean\n            }) => {\n              const borderColor =\n                $checked && !disabled ? colors.primary : colors.fadedText40\n\n              return {\n                outline: 0,\n                width: sizes.checkbox,\n                height: sizes.checkbox,\n                marginTop: theme.spacing.twoXS,\n                marginLeft: 0,\n                marginBottom: 0,\n                boxShadow:\n                  $isFocusVisible && $checked\n                    ? `0 0 0 0.2rem ${transparentize(colors.primary, 0.5)}`\n                    : \"\",\n                // This is painfully verbose, but baseweb seems to internally\n                // use the long-hand version, which means we can't use the\n                // shorthand names here as if we do we'll end up with warn\n                // logs spamming us every time a checkbox is rendered.\n                borderLeftWidth: sizes.borderWidth,\n                borderRightWidth: sizes.borderWidth,\n                borderTopWidth: sizes.borderWidth,\n                borderBottomWidth: sizes.borderWidth,\n                borderLeftColor: borderColor,\n                borderRightColor: borderColor,\n                borderTopColor: borderColor,\n                borderBottomColor: borderColor,\n              }\n            },\n          },\n          Label: {\n            style: {\n              position: \"relative\",\n              color,\n            },\n          },\n        }}\n      >\n        <StyledContent\n          visibility={labelVisibilityProtoValueToEnum(\n            element.labelVisibility?.value\n          )}\n          data-testid=\"stWidgetLabel\"\n        >\n          <StreamlitMarkdown\n            source={element.label}\n            allowHTML={false}\n            isLabel\n            largerLabel\n          />\n          {element.help && (\n            <StyledWidgetLabelHelpInline color={color}>\n              <TooltipIcon\n                content={element.help}\n                placement={Placement.TOP_RIGHT}\n              />\n            </StyledWidgetLabelHelpInline>\n          )}\n        </StyledContent>\n      </UICheckbox>\n    </StyledCheckbox>\n  )\n}\n\nfunction getStateFromWidgetMgr(\n  widgetMgr: WidgetStateManager,\n  element: CheckboxProto\n): boolean | undefined {\n  return widgetMgr.getBoolValue(element)\n}\n\nfunction getDefaultStateFromProto(element: CheckboxProto): boolean {\n  return element.default ?? null\n}\n\nfunction getCurrStateFromProto(element: CheckboxProto): boolean {\n  return element.value ?? null\n}\n\nfunction updateWidgetMgrState(\n  element: CheckboxProto,\n  widgetMgr: WidgetStateManager,\n  vws: ValueWSource<boolean>,\n  fragmentId?: string\n): void {\n  widgetMgr.setBoolValue(\n    element,\n    vws.value,\n    { fromUi: vws.fromUi },\n    fragmentId\n  )\n}\n\nexport default memo(Checkbox)\n"],"mappings":"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"}