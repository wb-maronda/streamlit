{"version":3,"file":"ImageCellEditor.test.js","names":["React","screen","render","ImageCellEditor","jsx","_jsx","describe","test","urls","canWrite","onCancel","onChange","imageElement","getByRole","expect","toHaveAttribute","linkElement","queryByRole","toBeNull"],"sources":["../../../../../../src/components/widgets/DataFrame/columns/cells/ImageCellEditor.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport { screen } from \"@testing-library/react\"\nimport \"@testing-library/jest-dom\"\n\nimport { render } from \"@streamlit/lib/src/test_util\"\n\nimport { ImageCellEditor } from \"./ImageCellEditor\"\n\ndescribe(\"ImageCellEditor\", () => {\n  test(\"renders an image with the correct src\", () => {\n    const urls = [\"https://example.com/image.jpg\"]\n    render(\n      <ImageCellEditor\n        urls={urls}\n        canWrite={false}\n        onCancel={() => {}}\n        onChange={() => {}}\n      />\n    )\n\n    const imageElement = screen.getByRole(\"img\")\n    expect(imageElement).toHaveAttribute(\"src\", urls[0])\n  })\n\n  test(\"renders a link with the correct href when imageData starts with 'http'\", () => {\n    const urls = [\"https://example.com/image.jpg\"]\n    render(\n      <ImageCellEditor\n        urls={urls}\n        canWrite={false}\n        onCancel={() => {}}\n        onChange={() => {}}\n      />\n    )\n\n    const linkElement = screen.getByRole(\"link\")\n    expect(linkElement).toHaveAttribute(\"href\", urls[0])\n    expect(linkElement).toHaveAttribute(\"target\", \"_blank\")\n    expect(linkElement).toHaveAttribute(\"rel\", \"noreferrer noopener\")\n  })\n\n  test(\"renders an image without a link when imageData does not start with 'http'\", () => {\n    const urls = [\"/local/path/to/image.jpg\"]\n    render(\n      <ImageCellEditor\n        urls={urls}\n        canWrite={false}\n        onCancel={() => {}}\n        onChange={() => {}}\n      />\n    )\n\n    const imageElement = screen.getByRole(\"img\")\n    expect(imageElement).toHaveAttribute(\"src\", urls[0])\n    expect(screen.queryByRole(\"link\")).toBeNull()\n  })\n\n  test(\"renders an empty image when urls prop is empty\", () => {\n    render(\n      <ImageCellEditor\n        urls={[]}\n        canWrite={false}\n        onCancel={() => {}}\n        onChange={() => {}}\n      />\n    )\n\n    const imageElement = screen.getByRole(\"img\")\n    expect(imageElement).toHaveAttribute(\"src\", \"\")\n  })\n})\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AAEzB,SAASC,MAAM,QAAQ,wBAAwB;AAC/C,OAAO,2BAA2B;AAElC,SAASC,MAAM;AAEf,SAASC,eAAe;AAA2B,SAAAC,GAAA,IAAAC,IAAA;AAEnDC,QAAQ,CAAC,iBAAiB,EAAE,MAAM;EAChCC,IAAI,CAAC,uCAAuC,EAAE,MAAM;IAClD,MAAMC,IAAI,GAAG,CAAC,+BAA+B,CAAC;IAC9CN,MAAM,eACJG,IAAA,CAACF,eAAe;MACdK,IAAI,EAAEA,IAAK;MACXC,QAAQ,EAAE,KAAM;MAChBC,QAAQ,EAAEA,CAAA,KAAM,CAAC,CAAE;MACnBC,QAAQ,EAAEA,CAAA,KAAM,CAAC;IAAE,CACpB,CACH,CAAC;IAED,MAAMC,YAAY,GAAGX,MAAM,CAACY,SAAS,CAAC,KAAK,CAAC;IAC5CC,MAAM,CAACF,YAAY,CAAC,CAACG,eAAe,CAAC,KAAK,EAAEP,IAAI,CAAC,CAAC,CAAC,CAAC;EACtD,CAAC,CAAC;EAEFD,IAAI,CAAC,wEAAwE,EAAE,MAAM;IACnF,MAAMC,IAAI,GAAG,CAAC,+BAA+B,CAAC;IAC9CN,MAAM,eACJG,IAAA,CAACF,eAAe;MACdK,IAAI,EAAEA,IAAK;MACXC,QAAQ,EAAE,KAAM;MAChBC,QAAQ,EAAEA,CAAA,KAAM,CAAC,CAAE;MACnBC,QAAQ,EAAEA,CAAA,KAAM,CAAC;IAAE,CACpB,CACH,CAAC;IAED,MAAMK,WAAW,GAAGf,MAAM,CAACY,SAAS,CAAC,MAAM,CAAC;IAC5CC,MAAM,CAACE,WAAW,CAAC,CAACD,eAAe,CAAC,MAAM,EAAEP,IAAI,CAAC,CAAC,CAAC,CAAC;IACpDM,MAAM,CAACE,WAAW,CAAC,CAACD,eAAe,CAAC,QAAQ,EAAE,QAAQ,CAAC;IACvDD,MAAM,CAACE,WAAW,CAAC,CAACD,eAAe,CAAC,KAAK,EAAE,qBAAqB,CAAC;EACnE,CAAC,CAAC;EAEFR,IAAI,CAAC,2EAA2E,EAAE,MAAM;IACtF,MAAMC,IAAI,GAAG,CAAC,0BAA0B,CAAC;IACzCN,MAAM,eACJG,IAAA,CAACF,eAAe;MACdK,IAAI,EAAEA,IAAK;MACXC,QAAQ,EAAE,KAAM;MAChBC,QAAQ,EAAEA,CAAA,KAAM,CAAC,CAAE;MACnBC,QAAQ,EAAEA,CAAA,KAAM,CAAC;IAAE,CACpB,CACH,CAAC;IAED,MAAMC,YAAY,GAAGX,MAAM,CAACY,SAAS,CAAC,KAAK,CAAC;IAC5CC,MAAM,CAACF,YAAY,CAAC,CAACG,eAAe,CAAC,KAAK,EAAEP,IAAI,CAAC,CAAC,CAAC,CAAC;IACpDM,MAAM,CAACb,MAAM,CAACgB,WAAW,CAAC,MAAM,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;EAC/C,CAAC,CAAC;EAEFX,IAAI,CAAC,gDAAgD,EAAE,MAAM;IAC3DL,MAAM,eACJG,IAAA,CAACF,eAAe;MACdK,IAAI,EAAE,EAAG;MACTC,QAAQ,EAAE,KAAM;MAChBC,QAAQ,EAAEA,CAAA,KAAM,CAAC,CAAE;MACnBC,QAAQ,EAAEA,CAAA,KAAM,CAAC;IAAE,CACpB,CACH,CAAC;IAED,MAAMC,YAAY,GAAGX,MAAM,CAACY,SAAS,CAAC,KAAK,CAAC;IAC5CC,MAAM,CAACF,YAAY,CAAC,CAACG,eAAe,CAAC,KAAK,EAAE,EAAE,CAAC;EACjD,CAAC,CAAC;AACJ,CAAC,CAAC"}