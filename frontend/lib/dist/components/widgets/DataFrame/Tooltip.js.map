{"version":3,"file":"Tooltip.js","names":["React","useTheme","ACCESSIBILITY_TYPE","PLACEMENT","Popover","StreamlitMarkdown","StyledTooltipContentWrapper","hasLightBackgroundColor","jsx","_jsx","Tooltip","_ref","top","left","content","clearTooltip","open","setOpen","useState","theme","colors","fontSizes","radii","closeTooltip","useCallback","children","style","fontSize","sm","source","allowHTML","placement","accessibilityType","tooltip","showArrow","popoverMargin","onClickOutside","onEsc","overrides","Body","borderTopLeftRadius","default","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","paddingTop","paddingBottom","paddingLeft","paddingRight","backgroundColor","Inner","bgColor","secondaryBg","color","bodyText","fontWeight","isOpen","position"],"sources":["../../../../src/components/widgets/DataFrame/Tooltip.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from \"react\"\n\nimport { useTheme } from \"@emotion/react\"\nimport { ACCESSIBILITY_TYPE, PLACEMENT, Popover } from \"baseui/popover\"\n\nimport StreamlitMarkdown from \"@streamlit/lib/src/components/shared/StreamlitMarkdown/StreamlitMarkdown\"\nimport { StyledTooltipContentWrapper } from \"@streamlit/lib/src/components/shared/Tooltip/styled-components\"\nimport { hasLightBackgroundColor } from \"@streamlit/lib/src/theme/utils\"\nimport { EmotionTheme } from \"@streamlit/lib/src/theme\"\n\nexport interface TooltipProps {\n  // The top position of the tooltip.\n  top: number\n  // The left position of the tooltip.\n  left: number\n  // The markdown content of the tooltip.\n  content: string\n  // Callback from useTooltips hook to clear the tooltip\n  clearTooltip: () => void\n}\n\n/**\n * A tooltip that can be positioned anywhere on the screen.\n *\n * This is mostly the same as the shared tooltip implementation, but\n * we cannot use that one since it is a StatefulTooltip and requires\n * a target component and cannot be triggered programmatically.\n * We need to be able to position the tooltip anywhere on the screen, so we use a Popover\n * instead. Since Popover doesn't support positioning to a virtual position,\n * we are using an invisible div as a workaround.\n *\n * @param top The top position of the tooltip.\n * @param left The left position of the tooltip.\n * @param content The markdown content of the tooltip.\n * @returns The tooltip react element.\n */\nfunction Tooltip({\n  top,\n  left,\n  content,\n  clearTooltip,\n}: TooltipProps): ReactElement {\n  const [open, setOpen] = React.useState(true)\n  const theme: EmotionTheme = useTheme()\n  const { colors, fontSizes, radii } = theme\n\n  const closeTooltip = React.useCallback((): void => {\n    setOpen(false)\n    clearTooltip()\n  }, [clearTooltip, setOpen])\n\n  return (\n    <Popover\n      content={\n        <StyledTooltipContentWrapper data-testid=\"stDataFrameTooltipContent\">\n          <StreamlitMarkdown\n            style={{ fontSize: fontSizes.sm }}\n            source={content}\n            allowHTML={false}\n          />\n        </StyledTooltipContentWrapper>\n      }\n      placement={PLACEMENT.top}\n      accessibilityType={ACCESSIBILITY_TYPE.tooltip}\n      showArrow={false}\n      popoverMargin={5}\n      onClickOutside={closeTooltip}\n      onEsc={closeTooltip}\n      overrides={{\n        Body: {\n          style: {\n            // This is annoying, but a bunch of warnings get logged when the\n            // shorthand version `borderRadius` is used here since the long\n            // names are used by BaseWeb and mixing the two is apparently\n            // bad :(\n            borderTopLeftRadius: radii.default,\n            borderTopRightRadius: radii.default,\n            borderBottomLeftRadius: radii.default,\n            borderBottomRightRadius: radii.default,\n\n            paddingTop: \"0 !important\",\n            paddingBottom: \"0 !important\",\n            paddingLeft: \"0 !important\",\n            paddingRight: \"0 !important\",\n\n            backgroundColor: \"transparent\",\n          },\n        },\n        Inner: {\n          style: {\n            backgroundColor: hasLightBackgroundColor(theme)\n              ? colors.bgColor\n              : colors.secondaryBg,\n            color: colors.bodyText,\n            fontSize: fontSizes.sm,\n            fontWeight: \"normal\",\n            // See the long comment about `borderRadius`. The same applies here\n            // to `padding`.\n            paddingTop: \"0 !important\",\n            paddingBottom: \"0 !important\",\n            paddingLeft: \"0 !important\",\n            paddingRight: \"0 !important\",\n          },\n        },\n      }}\n      isOpen={open}\n    >\n      <div\n        data-testid=\"stDataFrameTooltipTarget\"\n        style={{\n          // This is an invisible div that's used to position the tooltip.\n          // The position is provided from outside via the `top` and `left` properties.\n          // This a workaround for the fact that BaseWeb's Popover  doesn't support\n          // positioning to a virtual position and always requires a target\n          // component for positioning.\n          position: \"fixed\",\n          top,\n          left,\n        }}\n      ></div>\n    </Popover>\n  )\n}\n\nexport default Tooltip\n"],"mappings":"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"}