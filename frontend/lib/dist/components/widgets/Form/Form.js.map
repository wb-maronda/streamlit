{"version":3,"file":"Form.js","names":["React","useEffect","useState","AlertElement","Kind","ScriptRunState","StyledErrorContainer","StyledForm","jsx","_jsx","jsxs","_jsxs","MISSING_SUBMIT_BUTTON_WARNING","Form","props","formId","widgetMgr","hasSubmitButton","children","width","scriptRunState","clearOnSubmit","enterToSubmit","border","setFormSubmitBehaviors","showWarning","setShowWarning","NOT_RUNNING","submitWarning","body","kind","ERROR","className"],"sources":["../../../../src/components/widgets/Form/Form.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement, ReactNode, useEffect, useState } from \"react\"\n\nimport AlertElement from \"@streamlit/lib/src/components/elements/AlertElement\"\nimport { Kind } from \"@streamlit/lib/src/components/shared/AlertContainer\"\nimport { ScriptRunState } from \"@streamlit/lib/src/ScriptRunState\"\nimport { WidgetStateManager } from \"@streamlit/lib/src/WidgetStateManager\"\n\nimport { StyledErrorContainer, StyledForm } from \"./styled-components\"\n\nexport interface Props {\n  formId: string\n  clearOnSubmit: boolean\n  enterToSubmit: boolean\n  width: number\n  hasSubmitButton: boolean\n  scriptRunState: ScriptRunState\n  children?: ReactNode\n  widgetMgr: WidgetStateManager\n  border: boolean\n}\n\nexport const MISSING_SUBMIT_BUTTON_WARNING =\n  \"**Missing Submit Button**\" +\n  \"\\n\\nThis form has no submit button, which means that user interactions will \" +\n  \"never be sent to your Streamlit app.\" +\n  \"\\n\\nTo create a submit button, use the `st.form_submit_button()` function.\" +\n  \"\\n\\nFor more information, refer to the \" +\n  \"[documentation for forms](https://docs.streamlit.io/develop/api-reference/execution-flow/st.form).\"\n\nexport function Form(props: Props): ReactElement {\n  const {\n    formId,\n    widgetMgr,\n    hasSubmitButton,\n    children,\n    width,\n    scriptRunState,\n    clearOnSubmit,\n    enterToSubmit,\n    border,\n  } = props\n\n  // Tell WidgetStateManager if this form is `clearOnSubmit` and `enterToSubmit`\n  useEffect(() => {\n    widgetMgr.setFormSubmitBehaviors(formId, clearOnSubmit, enterToSubmit)\n  }, [widgetMgr, formId, clearOnSubmit, enterToSubmit])\n\n  // Determine if we need to show the \"missing submit button\" warning.\n  // If we have a submit button, we don't show the warning, of course.\n  // If we *don't* have a submit button, then we only mutate the showWarning\n  // flag when our scriptRunState is NOT_RUNNING. (If the script is still\n  // running, there might be an incoming SubmitButton delta that we just\n  // haven't seen yet.)\n  const [showWarning, setShowWarning] = useState(false)\n\n  if (hasSubmitButton && showWarning) {\n    setShowWarning(false)\n  } else if (\n    !hasSubmitButton &&\n    !showWarning &&\n    scriptRunState === ScriptRunState.NOT_RUNNING\n  ) {\n    setShowWarning(true)\n  }\n\n  let submitWarning: ReactElement | undefined\n  if (showWarning) {\n    submitWarning = (\n      <StyledErrorContainer>\n        <AlertElement\n          body={MISSING_SUBMIT_BUTTON_WARNING}\n          kind={Kind.ERROR}\n          width={width}\n        />\n      </StyledErrorContainer>\n    )\n  }\n\n  return (\n    <StyledForm className=\"stForm\" data-testid=\"stForm\" border={border}>\n      {children}\n      {submitWarning}\n    </StyledForm>\n  )\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,IAA6BC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3E,OAAOC,YAAY;AACnB,SAASC,IAAI;AACb,SAASC,cAAc;AAGvB,SAASC,oBAAoB,EAAEC,UAAU;AAA6B,SAAAC,GAAA,IAAAC,IAAA;AAAA,SAAAC,IAAA,IAAAC,KAAA;AActE,OAAO,MAAMC,6BAA6B,GACxC,2BAA2B,GAC3B,8EAA8E,GAC9E,sCAAsC,GACtC,4EAA4E,GAC5E,yCAAyC,GACzC,oGAAoG;AAEtG,OAAO,SAASC,IAAIA,CAACC,KAAY,EAAgB;EAC/C,MAAM;IACJC,MAAM;IACNC,SAAS;IACTC,eAAe;IACfC,QAAQ;IACRC,KAAK;IACLC,cAAc;IACdC,aAAa;IACbC,aAAa;IACbC;EACF,CAAC,GAAGT,KAAK;;EAET;EACAb,SAAS,CAAC,MAAM;IACde,SAAS,CAACQ,sBAAsB,CAACT,MAAM,EAAEM,aAAa,EAAEC,aAAa,CAAC;EACxE,CAAC,EAAE,CAACN,SAAS,EAAED,MAAM,EAAEM,aAAa,EAAEC,aAAa,CAAC,CAAC;;EAErD;EACA;EACA;EACA;EACA;EACA;EACA,MAAM,CAACG,WAAW,EAAEC,cAAc,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EAErD,IAAIe,eAAe,IAAIQ,WAAW,EAAE;IAClCC,cAAc,CAAC,KAAK,CAAC;EACvB,CAAC,MAAM,IACL,CAACT,eAAe,IAChB,CAACQ,WAAW,IACZL,cAAc,KAAKf,cAAc,CAACsB,WAAW,EAC7C;IACAD,cAAc,CAAC,IAAI,CAAC;EACtB;EAEA,IAAIE,aAAuC;EAC3C,IAAIH,WAAW,EAAE;IACfG,aAAa,gBACXnB,IAAA,CAACH,oBAAoB;MAAAY,QAAA,eACnBT,IAAA,CAACN,YAAY;QACX0B,IAAI,EAAEjB,6BAA8B;QACpCkB,IAAI,EAAE1B,IAAI,CAAC2B,KAAM;QACjBZ,KAAK,EAAEA;MAAM,CACd;IAAC,CACkB,CACvB;EACH;EAEA,oBACER,KAAA,CAACJ,UAAU;IAACyB,SAAS,EAAC,QAAQ;IAAC,eAAY,QAAQ;IAACT,MAAM,EAAEA,MAAO;IAAAL,QAAA,GAChEA,QAAQ,EACRU,aAAa;EAAA,CACJ,CAAC;AAEjB"}