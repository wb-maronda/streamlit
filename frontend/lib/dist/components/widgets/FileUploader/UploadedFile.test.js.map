{"version":3,"file":"UploadedFile.test.js","names":["React","screen","fireEvent","render","UploadedFile","UploadedFileStatus","UploadFileInfo","jsx","_jsx","getProps","fileStatus","fileInfo","onDelete","jest","fn","describe","it","props","type","cancelToken","progress","expect","getByRole","toBeInTheDocument","errorMessage","getByTestId","toHaveTextContent","fileId","fileUrls","getByText","deleteBtn","click","toHaveBeenCalledWith"],"sources":["../../../../src/components/widgets/FileUploader/UploadedFile.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CancelTokenSource } from \"axios\"\nimport React from \"react\"\nimport \"@testing-library/jest-dom\"\nimport { screen, fireEvent } from \"@testing-library/react\"\nimport { render } from \"@streamlit/lib/src/test_util\"\n\nimport UploadedFile, { Props, UploadedFileStatus } from \"./UploadedFile\"\nimport { FileStatus, UploadFileInfo } from \"./UploadFileInfo\"\n\nconst getProps = (fileStatus: FileStatus): Props => ({\n  fileInfo: new UploadFileInfo(\"filename.txt\", 15, 1, fileStatus),\n  onDelete: jest.fn(),\n})\n\ndescribe(\"FileStatus widget\", () => {\n  it(\"shows progress bar when uploading\", () => {\n    const props = getProps({\n      type: \"uploading\",\n      cancelToken: null as unknown as CancelTokenSource,\n      progress: 40,\n    })\n    render(<UploadedFileStatus {...props} />)\n    expect(screen.getByRole(\"progressbar\")).toBeInTheDocument()\n  })\n\n  it(\"shows error status\", () => {\n    const props = getProps({\n      type: \"error\",\n      errorMessage: \"Everything is terrible\",\n    })\n    render(<UploadedFileStatus {...props} />)\n    const errorMessage = screen.getByTestId(\"stFileUploaderFileErrorMessage\")\n    expect(errorMessage).toHaveTextContent(\"Everything is terrible\")\n  })\n\n  it(\"show file size when uploaded\", () => {\n    const props = getProps({\n      type: \"uploaded\",\n      fileId: \"fileId\",\n      fileUrls: {},\n    })\n    render(<UploadedFileStatus {...props} />)\n    expect(screen.getByText(\"15.0B\")).toBeInTheDocument()\n  })\n})\n\ndescribe(\"UploadedFile widget\", () => {\n  it(\"renders without crashing\", () => {\n    const props = getProps({\n      type: \"uploaded\",\n      fileId: \"fileId\",\n      fileUrls: {},\n    })\n    render(<UploadedFile {...props} />)\n    expect(screen.getByTestId(\"stFileUploaderFile\")).toBeInTheDocument()\n    const deleteBtn = screen.getByRole(\"button\")\n    fireEvent.click(deleteBtn)\n    expect(props.onDelete).toHaveBeenCalledWith(1)\n  })\n})\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,2BAA2B;AAClC,SAASC,MAAM,EAAEC,SAAS,QAAQ,wBAAwB;AAC1D,SAASC,MAAM;AAEf,OAAOC,YAAY,IAAWC,kBAAkB;AAChD,SAAqBC,cAAc;AAA0B,SAAAC,GAAA,IAAAC,IAAA;AAE7D,MAAMC,QAAQ,GAAIC,UAAsB,KAAa;EACnDC,QAAQ,EAAE,IAAIL,cAAc,CAAC,cAAc,EAAE,EAAE,EAAE,CAAC,EAAEI,UAAU,CAAC;EAC/DE,QAAQ,EAAEC,IAAI,CAACC,EAAE,CAAC;AACpB,CAAC,CAAC;AAEFC,QAAQ,CAAC,mBAAmB,EAAE,MAAM;EAClCC,EAAE,CAAC,mCAAmC,EAAE,MAAM;IAC5C,MAAMC,KAAK,GAAGR,QAAQ,CAAC;MACrBS,IAAI,EAAE,WAAW;MACjBC,WAAW,EAAE,IAAoC;MACjDC,QAAQ,EAAE;IACZ,CAAC,CAAC;IACFjB,MAAM,eAACK,IAAA,CAACH,kBAAkB;MAAA,GAAKY;IAAK,CAAG,CAAC,CAAC;IACzCI,MAAM,CAACpB,MAAM,CAACqB,SAAS,CAAC,aAAa,CAAC,CAAC,CAACC,iBAAiB,CAAC,CAAC;EAC7D,CAAC,CAAC;EAEFP,EAAE,CAAC,oBAAoB,EAAE,MAAM;IAC7B,MAAMC,KAAK,GAAGR,QAAQ,CAAC;MACrBS,IAAI,EAAE,OAAO;MACbM,YAAY,EAAE;IAChB,CAAC,CAAC;IACFrB,MAAM,eAACK,IAAA,CAACH,kBAAkB;MAAA,GAAKY;IAAK,CAAG,CAAC,CAAC;IACzC,MAAMO,YAAY,GAAGvB,MAAM,CAACwB,WAAW,CAAC,gCAAgC,CAAC;IACzEJ,MAAM,CAACG,YAAY,CAAC,CAACE,iBAAiB,CAAC,wBAAwB,CAAC;EAClE,CAAC,CAAC;EAEFV,EAAE,CAAC,8BAA8B,EAAE,MAAM;IACvC,MAAMC,KAAK,GAAGR,QAAQ,CAAC;MACrBS,IAAI,EAAE,UAAU;MAChBS,MAAM,EAAE,QAAQ;MAChBC,QAAQ,EAAE,CAAC;IACb,CAAC,CAAC;IACFzB,MAAM,eAACK,IAAA,CAACH,kBAAkB;MAAA,GAAKY;IAAK,CAAG,CAAC,CAAC;IACzCI,MAAM,CAACpB,MAAM,CAAC4B,SAAS,CAAC,OAAO,CAAC,CAAC,CAACN,iBAAiB,CAAC,CAAC;EACvD,CAAC,CAAC;AACJ,CAAC,CAAC;AAEFR,QAAQ,CAAC,qBAAqB,EAAE,MAAM;EACpCC,EAAE,CAAC,0BAA0B,EAAE,MAAM;IACnC,MAAMC,KAAK,GAAGR,QAAQ,CAAC;MACrBS,IAAI,EAAE,UAAU;MAChBS,MAAM,EAAE,QAAQ;MAChBC,QAAQ,EAAE,CAAC;IACb,CAAC,CAAC;IACFzB,MAAM,eAACK,IAAA,CAACJ,YAAY;MAAA,GAAKa;IAAK,CAAG,CAAC,CAAC;IACnCI,MAAM,CAACpB,MAAM,CAACwB,WAAW,CAAC,oBAAoB,CAAC,CAAC,CAACF,iBAAiB,CAAC,CAAC;IACpE,MAAMO,SAAS,GAAG7B,MAAM,CAACqB,SAAS,CAAC,QAAQ,CAAC;IAC5CpB,SAAS,CAAC6B,KAAK,CAACD,SAAS,CAAC;IAC1BT,MAAM,CAACJ,KAAK,CAACL,QAAQ,CAAC,CAACoB,oBAAoB,CAAC,CAAC,CAAC;EAChD,CAAC,CAAC;AACJ,CAAC,CAAC"}