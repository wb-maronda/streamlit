{"version":3,"file":"withPagination.test.js","names":["React","screen","render","withPagination","jsx","_jsx","TestComponent","children","getProps","props","arguments","length","undefined","items","pageSize","resetOnAdd","describe","setState","jest","fn","useStateSpy","spyOn","mockImplementation","init","it","WithHoc","expect","getByText","toBeInTheDocument","getByTestId","queryByTestId","not","rerender","newProps","concat"],"sources":["../../../../../src/components/widgets/FileUploader/withPagination/withPagination.test.tsx"],"sourcesContent":["/**\n * Copyright (c) Streamlit Inc. (2018-2022) Snowflake Inc. (2022-2024)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from \"react\"\n\nimport \"@testing-library/jest-dom\"\nimport { screen } from \"@testing-library/react\"\n\nimport { render } from \"@streamlit/lib/src/test_util\"\n\nimport withPagination, { Props as HocProps } from \"./withPagination\"\n\nconst TestComponent: React.ComponentType<\n  React.PropsWithChildren<unknown>\n> = () => <div>test</div>\n\nconst getProps = (props: Partial<HocProps> = {}): HocProps => ({\n  items: [{}, {}, {}, {}],\n  pageSize: 2,\n  resetOnAdd: true,\n  ...props,\n})\n\ndescribe(\"withPagination HOC\", () => {\n  const setState = jest.fn()\n  const useStateSpy = jest.spyOn(React, \"useState\")\n  // @ts-expect-error\n  useStateSpy.mockImplementation(init => [init, setState])\n\n  it(\"renders without crashing\", () => {\n    const props = getProps()\n    const WithHoc = withPagination(TestComponent)\n    render(<WithHoc {...props} />)\n\n    expect(screen.getByText(\"test\")).toBeInTheDocument()\n    expect(screen.getByTestId(\"stFileUploaderPagination\")).toBeInTheDocument()\n  })\n\n  it(\"should render a paginated component\", () => {\n    const props = getProps({\n      pageSize: 3,\n      items: [{}, {}, {}, {}],\n    })\n    const WithHoc = withPagination(TestComponent)\n    render(<WithHoc {...props} />)\n    expect(screen.getByText(\"test\")).toBeInTheDocument()\n    expect(screen.getByTestId(\"stFileUploaderPagination\")).toBeInTheDocument()\n    expect(screen.getByText(\"Showing page 1 of 2\")).toBeInTheDocument()\n  })\n\n  it(\"should render component without pagination\", () => {\n    const props = getProps({\n      pageSize: 5,\n      items: [{}, {}, {}, {}],\n    })\n    const WithHoc = withPagination(TestComponent)\n    render(<WithHoc {...props} />)\n    expect(screen.getByText(\"test\")).toBeInTheDocument()\n    expect(\n      screen.queryByTestId(\"stFileUploaderPagination\")\n    ).not.toBeInTheDocument()\n  })\n\n  it(\"should reset on add\", () => {\n    const props = getProps()\n    const WithHoc = withPagination(TestComponent)\n    const { rerender } = render(<WithHoc {...props} />)\n    const newProps = getProps({ items: props.items.concat([{}]) })\n    rerender(<WithHoc {...newProps} />)\n\n    expect(screen.getByText(\"Showing page 1 of 3\")).toBeInTheDocument()\n  })\n})\n"],"mappings":"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"}